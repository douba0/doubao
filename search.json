[{"title":"mysql","url":"/mysql/mysql/","content":"<h1 id=\"安装-mysql9\"><a href=\"#安装-mysql9\" class=\"headerlink\" title=\"安装 mysql9\"></a>安装 mysql9</h1><p>使用<code>docker compose</code>安装</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">services:</span><br><span class=\"line\">  mysql:</span><br><span class=\"line\">    image: dockerhub.qingcloud.com/doubao/mysql:9.0.1</span><br><span class=\"line\">    container_name: mysql9</span><br><span class=\"line\">    restart: always</span><br><span class=\"line\">    environment:</span><br><span class=\"line\">      MYSQL_ROOT_PASSWORD: root</span><br><span class=\"line\">      MYSQL_USER: app</span><br><span class=\"line\">      MYSQL_PASSWORD: app</span><br><span class=\"line\">    ports:</span><br><span class=\"line\">      - <span class=\"string\">&quot;3306:3306&quot;</span></span><br><span class=\"line\">    volumes:</span><br><span class=\"line\">      - ../mysql/data:/var/lib/mysql</span><br><span class=\"line\">      - ../mysql/my.cnf:/etc/mysql/my.cnf</span><br><span class=\"line\">      - ../mysql/logs:/var/log/mysql</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p><code>my.cnf</code>配置文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\"># 基本设置</span><br><span class=\"line\">user=mysql</span><br><span class=\"line\">port=3306</span><br><span class=\"line\">socket=/var/run/mysqld/mysqld.sock</span><br><span class=\"line\">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class=\"line\">secure-file-priv=/var/lib/mysql-files</span><br><span class=\"line\">datadir=/var/lib/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"># 性能优化</span><br><span class=\"line\">key_buffer_size=16M</span><br><span class=\"line\">max_allowed_packet=64M</span><br><span class=\"line\">table_open_cache=400</span><br><span class=\"line\">sort_buffer_size=4M</span><br><span class=\"line\">read_buffer_size=4M</span><br><span class=\"line\">read_rnd_buffer_size=4M</span><br><span class=\"line\">myisam_sort_buffer_size=64M</span><br><span class=\"line\">thread_cache_size=8</span><br><span class=\"line\"></span><br><span class=\"line\"># InnoDB 引擎设置</span><br><span class=\"line\">innodb_buffer_pool_size=1G</span><br><span class=\"line\">innodb_log_file_size=256M</span><br><span class=\"line\">innodb_flush_log_at_trx_commit=1</span><br><span class=\"line\">innodb_file_per_table=1</span><br><span class=\"line\">innodb_open_files=400</span><br><span class=\"line\">innodb_io_capacity=400</span><br><span class=\"line\">innodb_flush_method=O_DIRECT</span><br><span class=\"line\"></span><br><span class=\"line\"># 日志设置</span><br><span class=\"line\">log_error=/var/log/mysql/error.log</span><br><span class=\"line\">slow_query_log=1</span><br><span class=\"line\">slow_query_log_file=/var/log/mysql/mysql-slow.log</span><br><span class=\"line\">long_query_time=2</span><br></pre></td></tr></table></figure>\n\n<p>目录结构</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">── mysql/</span><br><span class=\"line\">    ├── data/</span><br><span class=\"line\">    ├── logs/</span><br><span class=\"line\">    └── my.cnf</span><br></pre></td></tr></table></figure>\n","categories":["mysql"],"tags":["mysql"]},{"title":"mysql主从","url":"/mysql/mysql8-master-slave-install/","content":"<h1 id=\"mysql-高可用\"><a href=\"#mysql-高可用\" class=\"headerlink\" title=\"mysql 高可用\"></a>mysql 高可用</h1><p>使用 docker compose 部署主从 mysql 的主从架构</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">mysql-master:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">dockerhub.qingcloud.com/doubao/mysql:8.0.39</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">mysql-master</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_ROOT_PASSWORD:</span> <span class=\"string\">root</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_USER:</span> <span class=\"string\">app</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_PASSWORD:</span> <span class=\"string\">app</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;3306:3306&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./master/data:/var/lib/mysql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./master/config/my.cnf:/etc/mysql/my.cnf</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./master/logs:/var/log/mysql</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">mysql-cluster</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">mysql-slave:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">dockerhub.qingcloud.com/doubao/mysql:8.0.39</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">mysql-slave</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">MYSQL_ROOT_PASSWORD:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;3307:3306&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./slave/data:/var/lib/mysql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./slave/config/my.cnf:/etc/mysql/my.cnf</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./slave/logs:/var/log/mysql</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">mysql-master</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">mysql-cluster</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">mysql-cluster:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p>master config</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\"><span class=\"comment\">#id需要唯一</span></span><br><span class=\"line\">server-id=1</span><br><span class=\"line\">log-bin=mysql-bin</span><br><span class=\"line\"><span class=\"comment\"># 基本设置</span></span><br><span class=\"line\">user=mysql</span><br><span class=\"line\">port=3306</span><br><span class=\"line\">socket=/var/run/mysqld/mysqld.sock</span><br><span class=\"line\">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class=\"line\">secure-file-priv=/var/lib/mysql-files</span><br><span class=\"line\">datadir=/var/lib/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 性能优化</span></span><br><span class=\"line\">key_buffer_size=16M</span><br><span class=\"line\">max_allowed_packet=64M</span><br><span class=\"line\">table_open_cache=400</span><br><span class=\"line\">sort_buffer_size=4M</span><br><span class=\"line\">read_buffer_size=4M</span><br><span class=\"line\">read_rnd_buffer_size=4M</span><br><span class=\"line\">myisam_sort_buffer_size=64M</span><br><span class=\"line\">thread_cache_size=8</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># InnoDB 引擎设置</span></span><br><span class=\"line\">innodb_buffer_pool_size=1G</span><br><span class=\"line\">innodb_log_file_size=256M</span><br><span class=\"line\">innodb_flush_log_at_trx_commit=1</span><br><span class=\"line\">innodb_file_per_table=1</span><br><span class=\"line\">innodb_open_files=400</span><br><span class=\"line\">innodb_io_capacity=400</span><br><span class=\"line\">innodb_flush_method=O_DIRECT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 日志设置</span></span><br><span class=\"line\">log_error=/var/log/mysql/error.log</span><br><span class=\"line\">slow_query_log=1</span><br><span class=\"line\">slow_query_log_file=/var/log/mysql/mysql-slow.log</span><br><span class=\"line\">long_query_time=2slave config</span><br></pre></td></tr></table></figure>\n\n<p>slave config</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[mysqld]</span><br><span class=\"line\"><span class=\"comment\">#id需要唯一</span></span><br><span class=\"line\">server-id=2</span><br><span class=\"line\">relay-log=relay-bin</span><br><span class=\"line\">log-bin=mysql-bin</span><br><span class=\"line\"><span class=\"comment\"># 基本设置</span></span><br><span class=\"line\">user=mysql</span><br><span class=\"line\">port=3306</span><br><span class=\"line\">socket=/var/run/mysqld/mysqld.sock</span><br><span class=\"line\">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class=\"line\">secure-file-priv=/var/lib/mysql-files</span><br><span class=\"line\">datadir=/var/lib/mysql</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 性能优化</span></span><br><span class=\"line\">key_buffer_size=16M</span><br><span class=\"line\">max_allowed_packet=64M</span><br><span class=\"line\">table_open_cache=400</span><br><span class=\"line\">sort_buffer_size=4M</span><br><span class=\"line\">read_buffer_size=4M</span><br><span class=\"line\">read_rnd_buffer_size=4M</span><br><span class=\"line\">myisam_sort_buffer_size=64M</span><br><span class=\"line\">thread_cache_size=8</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># InnoDB 引擎设置</span></span><br><span class=\"line\">innodb_buffer_pool_size=1G</span><br><span class=\"line\">innodb_log_file_size=256M</span><br><span class=\"line\">innodb_flush_log_at_trx_commit=1</span><br><span class=\"line\">innodb_file_per_table=1</span><br><span class=\"line\">innodb_open_files=400</span><br><span class=\"line\">innodb_io_capacity=400</span><br><span class=\"line\">innodb_flush_method=O_DIRECT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 日志设置</span></span><br><span class=\"line\">log_error=/var/log/mysql/error.log</span><br><span class=\"line\">slow_query_log=1</span><br><span class=\"line\">slow_query_log_file=/var/log/mysql/mysql-slow.log</span><br><span class=\"line\">long_query_time=2</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"部署服务\"><a href=\"#部署服务\" class=\"headerlink\" title=\"部署服务\"></a>部署服务</h1><p>使用 docker compose 启动服务后，先进去容器，然后连接 mysql</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#进入容器</span></span><br><span class=\"line\">docker <span class=\"built_in\">exec</span> -it mysql-master bash</span><br><span class=\"line\"><span class=\"comment\">#连接mysql</span></span><br><span class=\"line\">mysql -h localhost -u root -proot</span><br></pre></td></tr></table></figure>\n\n<p>连接完成后，执行下面的 sql 新建用户。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;replica&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;replica-password&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">GRANT</span> REPLICATION SLAVE <span class=\"keyword\">ON</span> <span class=\"operator\">*</span>.<span class=\"operator\">*</span> <span class=\"keyword\">TO</span> <span class=\"string\">&#x27;replica&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>\n\n<p>查看 master 的 binlog 信息，slave 同步的时候需要。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; SHOW MASTER STATUS\\G;</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">             File: mysql-bin.000003</span><br><span class=\"line\">         Position: 862</span><br><span class=\"line\">     Binlog_Do_DB:</span><br><span class=\"line\"> Binlog_Ignore_DB:</span><br><span class=\"line\">Executed_Gtid_Set:</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>同样的方式进入到 slave 容器中，然后执行同步命令然后启动同步</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; CHANGE MASTER TO MASTER_HOST=<span class=\"string\">&#x27;mysql-master&#x27;</span>, MASTER_USER=<span class=\"string\">&#x27;replica&#x27;</span>, MASTER_PASSWORD=<span class=\"string\">&#x27;replica-password&#x27;</span>, MASTER_LOG_FILE=<span class=\"string\">&#x27;mysql-bin.000005&#x27;</span>, MASTER_LOG_POS=157,  get_master_public_key=1;</span><br></pre></td></tr></table></figure>\n\n<p><code> get_master_public_key=1;</code>是为了解决 slave 连接 master 的认证问题。因为 mysql8 以后使用<code>&#39;caching_sha2_password</code>密码加密。所以特殊处理。</p>\n<p><code>MASTER_LOG_FILE=&#39;mysql-bin.000005&#39;, MASTER_LOG_POS=157,</code>这两个信息就是从<code>master status</code>中获取到的。</p>\n<p>执行<code>START SLAVE</code>启动同步；</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; START SLAVE;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.03 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; SHOW SLAVE STATUS\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> <span class=\"built_in\">source</span> to send event</span><br><span class=\"line\">                  Master_Host: mysql-master</span><br><span class=\"line\">                  Master_User: replica</span><br><span class=\"line\">                  Master_Port: 3306</span><br><span class=\"line\">                Connect_Retry: 60</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000005</span><br><span class=\"line\">          Read_Master_Log_Pos: 157</span><br><span class=\"line\">               Relay_Log_File: relay-bin.000002</span><br><span class=\"line\">                Relay_Log_Pos: 326</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000005</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br><span class=\"line\">              Replicate_Do_DB:</span><br><span class=\"line\">          Replicate_Ignore_DB:</span><br><span class=\"line\">           Replicate_Do_Table:</span><br><span class=\"line\">       Replicate_Ignore_Table:</span><br><span class=\"line\">      Replicate_Wild_Do_Table:</span><br><span class=\"line\">  Replicate_Wild_Ignore_Table:</span><br><span class=\"line\">                   Last_Errno: 0</span><br><span class=\"line\">                   Last_Error:</span><br><span class=\"line\">                 Skip_Counter: 0</span><br><span class=\"line\">          Exec_Master_Log_Pos: 157</span><br><span class=\"line\">              Relay_Log_Space: 530</span><br><span class=\"line\">              Until_Condition: None</span><br><span class=\"line\">               Until_Log_File:</span><br><span class=\"line\">                Until_Log_Pos: 0</span><br><span class=\"line\">           Master_SSL_Allowed: No</span><br><span class=\"line\">           Master_SSL_CA_File:</span><br><span class=\"line\">           Master_SSL_CA_Path:</span><br><span class=\"line\">              Master_SSL_Cert:</span><br><span class=\"line\">            Master_SSL_Cipher:</span><br><span class=\"line\">               Master_SSL_Key:</span><br><span class=\"line\">        Seconds_Behind_Master: 0</span><br><span class=\"line\">Master_SSL_Verify_Server_Cert: No</span><br><span class=\"line\">                Last_IO_Errno: 0</span><br><span class=\"line\">                Last_IO_Error:</span><br><span class=\"line\">               Last_SQL_Errno: 0</span><br><span class=\"line\">               Last_SQL_Error:</span><br><span class=\"line\">  Replicate_Ignore_Server_Ids:</span><br><span class=\"line\">             Master_Server_Id: 1</span><br><span class=\"line\">                  Master_UUID: 377a786f-5262-11ef-8bef-0242ac120002</span><br><span class=\"line\">             Master_Info_File: mysql.slave_master_info</span><br><span class=\"line\">                    SQL_Delay: 0</span><br><span class=\"line\">          SQL_Remaining_Delay: NULL</span><br><span class=\"line\">      Slave_SQL_Running_State: Replica has <span class=\"built_in\">read</span> all relay <span class=\"built_in\">log</span>; waiting <span class=\"keyword\">for</span> more updates</span><br><span class=\"line\">           Master_Retry_Count: 86400</span><br><span class=\"line\">                  Master_Bind:</span><br><span class=\"line\">      Last_IO_Error_Timestamp:</span><br><span class=\"line\">     Last_SQL_Error_Timestamp:</span><br><span class=\"line\">               Master_SSL_Crl:</span><br><span class=\"line\">           Master_SSL_Crlpath:</span><br><span class=\"line\">           Retrieved_Gtid_Set:</span><br><span class=\"line\">            Executed_Gtid_Set:</span><br><span class=\"line\">                Auto_Position: 0</span><br><span class=\"line\">         Replicate_Rewrite_DB:</span><br><span class=\"line\">                 Channel_Name:</span><br><span class=\"line\">           Master_TLS_Version:</span><br><span class=\"line\">       Master_public_key_path:</span><br><span class=\"line\">        Get_master_public_key: 1</span><br><span class=\"line\">            Network_Namespace:</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span>, 1 warning (0.00 sec)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"验证同步\"><a href=\"#验证同步\" class=\"headerlink\" title=\"验证同步\"></a>验证同步</h1><p>在 master 上新建一个库</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; create database <span class=\"built_in\">test</span>;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n\n<p>在 slave 上查看库是否同步过来</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysql&gt; show databases;</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| Database           |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">| information_schema |</span><br><span class=\"line\">| mysql              |</span><br><span class=\"line\">| performance_schema |</span><br><span class=\"line\">| sys                |</span><br><span class=\"line\">| <span class=\"built_in\">test</span>               |</span><br><span class=\"line\">+--------------------+</span><br><span class=\"line\">5 rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>\n","categories":["mysql"],"tags":["mysql"]},{"title":"buildkit","url":"/docker/buildkit/","content":"<h2 id=\"安装-buildkit\"><a href=\"#安装-buildkit\" class=\"headerlink\" title=\"安装 buildkit\"></a>安装 buildkit</h2><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">wget https://github.com/moby/buildkit/releases/download/v0.15.1/buildkit-v0.15.1.linux-amd64.tar.gz</span><br><span class=\"line\">tar zxvf  buildkit-v0.15.1.linux-amd64.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">mv</span> ./bin/* /usr/local/bin</span><br></pre></td></tr></table></figure>\n\n<p>启动<code>buildkitd</code>服务，使用<code>--oci-worker=false --containerd-worker=true</code>参数,可以让 buildkitd 服务使用 containerd 后端</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">buildkitd --oci-worker=false --containerd-worker=true &amp;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p><code>dockerfile</code></p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> dockerhub.qingcloud.com/doubao/nginx</span><br><span class=\"line\"><span class=\"keyword\">LABEL</span><span class=\"language-bash\"> doubao=cute</span></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p>构建镜像</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@devops:~/data# buildctl build \\</span><br><span class=\"line\">    --frontend=dockerfile.v0 \\</span><br><span class=\"line\">    --<span class=\"built_in\">local</span> context=. \\</span><br><span class=\"line\">    --<span class=\"built_in\">local</span> dockerfile=. \\</span><br><span class=\"line\">    --output <span class=\"built_in\">type</span>=image,name=dockerhub.qingcloud.com/doubao/nginx:doubao</span><br><span class=\"line\">[+] Building 0.5s (6/6) FINISHED</span><br><span class=\"line\"> =&gt; [internal] load build definition from Dockerfile                                                                                                                                                                                                                                    0.0s</span><br><span class=\"line\"> =&gt; =&gt; transferring dockerfile: 97B                                                                                                                                                                                                                                                     0.0s</span><br><span class=\"line\"> =&gt; [internal] load metadata <span class=\"keyword\">for</span> dockerhub.qingcloud.com/doubao/nginx:latest                                                                                                                                                                                                            0.3s</span><br><span class=\"line\"> =&gt; [auth] doubao/nginx:pull token <span class=\"keyword\">for</span> dockerhub.qingcloud.com                                                                                                                                                                                                                          0.0s</span><br><span class=\"line\"> =&gt; [internal] load .dockerignore                                                                                                                                                                                                                                                       0.0s</span><br><span class=\"line\"> =&gt; =&gt; transferring context: 2B                                                                                                                                                                                                                                                         0.0s</span><br><span class=\"line\"> =&gt; CACHED [1/1] FROM dockerhub.qingcloud.com/doubao/nginx:latest@sha256:c94f3436f3bfcb467e9723bdb4957e2e86c00cc5f21e38a40d668c1a4c324696                                                                                                                                               0.0s</span><br><span class=\"line\"> =&gt; =&gt; resolve dockerhub.qingcloud.com/doubao/nginx:latest@sha256:c94f3436f3bfcb467e9723bdb4957e2e86c00cc5f21e38a40d668c1a4c324696                                                                                                                                                      0.0s</span><br><span class=\"line\"> =&gt; exporting to image                                                                                                                                                                                                                                                                  0.0s</span><br><span class=\"line\"> =&gt; =&gt; exporting layers                                                                                                                                                                                                                                                                 0.0s</span><br><span class=\"line\"> =&gt; =&gt; exporting manifest sha256:1fee4f91e595af322b8aaf7b3d74a1de6de0e12798097631b1e2fc063a3818dc                                                                                                                                                                                       0.0s</span><br><span class=\"line\"> =&gt; =&gt; exporting config sha256:70fddb68d1e838d671f94e3c579b75e81d6e4717fc25e3c8decec405cf3b7f67                                                                                                                                                                                         0.0s</span><br><span class=\"line\"> =&gt; =&gt; naming to dockerhub.qingcloud.com/doubao/nginx:doubao</span><br></pre></td></tr></table></figure>\n\n<p>查看本地镜像，这个<code>docker</code>无法查看到，可以使用<code>ctr</code>来查看，<code>ctr</code>是有<code>namespace</code>概念的</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@devops:~/data# ctr -n buildkit i <span class=\"built_in\">ls</span></span><br><span class=\"line\">REF                                         TYPE                                                 DIGEST                                                                  SIZE     PLATFORMS   LABELS</span><br><span class=\"line\">dockerhub.qingcloud.com/doubao/nginx:doubao application/vnd.docker.distribution.manifest.v2+json sha256:1fee4f91e595af322b8aaf7b3d74a1de6de0e12798097631b1e2fc063a3818dc 67.7 MiB linux/amd64 -</span><br><span class=\"line\">root@devops:~/data#</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>推送到远程仓库里面</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@devops:~/data# ctr -n buildkit i push -u username:password dockerhub.qingcloud.com/doubao/nginx:doubao</span><br><span class=\"line\">manifest-sha256:1fee4f91e595af322b8aaf7b3d74a1de6de0e12798097631b1e2fc063a3818dc: <span class=\"keyword\">done</span>           |++++++++++++++++++++++++++++++++++++++|</span><br><span class=\"line\">config-sha256:70fddb68d1e838d671f94e3c579b75e81d6e4717fc25e3c8decec405cf3b7f67:   <span class=\"keyword\">done</span>           |++++++++++++++++++++++++++++++++++++++|</span><br><span class=\"line\">elapsed: 2.4 s                                                                    total:  8.9 Ki (3.7 KiB/s)</span><br><span class=\"line\">root@devops:~/data#</span><br></pre></td></tr></table></figure>\n","categories":["docker"],"tags":["docker"]},{"title":"Docker in Docker","url":"/docker/docker%20in%20docker/","content":"<h1 id=\"Docker-in-Docker-DinD-深入解析\"><a href=\"#Docker-in-Docker-DinD-深入解析\" class=\"headerlink\" title=\"Docker in Docker (DinD) 深入解析\"></a>Docker in Docker (DinD) 深入解析</h1><p>Docker 技术在现代软件开发中已经成为一种标准，尤其是在微服务架构和持续集成&#x2F;持续部署（CI&#x2F;CD）流程中。随着 Docker 的普及，开发者们开始探索在容器内部运行 Docker 的能力，这种技术被称为 Docker in Docker（DinD）。</p>\n<h1 id=\"什么是-Docker-in-Docker？\"><a href=\"#什么是-Docker-in-Docker？\" class=\"headerlink\" title=\"什么是 Docker in Docker？\"></a>什么是 Docker in Docker？</h1><p>Docker in Docker 是指在一个 Docker 容器内部运行 Docker 守护进程的技术。这意味着你可以在一个容器中创建、管理和操作其他 Docker 容器。这种模式通常用于 CI&#x2F;CD 流程中，允许在隔离环境中构建和测试应用程序。</p>\n<h2 id=\"DinD-的实现方式\"><a href=\"#DinD-的实现方式\" class=\"headerlink\" title=\"DinD 的实现方式\"></a>DinD 的实现方式</h2><h3 id=\"1-直接挂载-Docker-sock\"><a href=\"#1-直接挂载-Docker-sock\" class=\"headerlink\" title=\"1. 直接挂载 Docker.sock\"></a>1. 直接挂载 Docker.sock</h3><p>最简单的实现方式是将宿主机的 Docker 套接字（<code>/var/run/docker.sock</code>）挂载到容器中，这样容器内的应用可以直接与宿主机的 Docker 守护进程进行交互。</p>\n<span id=\"more\"></span>\n\n<h4 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h4><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@devops:~# docker run -it --<span class=\"built_in\">rm</span> -v /var/run/docker.sock:/var/run/docker.sock docker:latest sh</span><br><span class=\"line\">/ <span class=\"comment\"># docker run hello-world</span></span><br><span class=\"line\">Unable to find image <span class=\"string\">&#x27;hello-world:latest&#x27;</span> locally</span><br><span class=\"line\">latest: Pulling from library/hello-world</span><br><span class=\"line\">c1ec31eb5944: Pull complete</span><br><span class=\"line\">Digest: sha256:1408fec50309afee38f3535383f5b09419e6dc0925bc69891e79d84cc4cdcec6</span><br><span class=\"line\">Status: Downloaded newer image <span class=\"keyword\">for</span> hello-world:latest</span><br><span class=\"line\"></span><br><span class=\"line\">Hello from Docker!</span><br><span class=\"line\">This message shows that your installation appears to be working correctly.</span><br><span class=\"line\"></span><br><span class=\"line\">To generate this message, Docker took the following steps:</span><br><span class=\"line\"> 1. The Docker client contacted the Docker daemon.</span><br><span class=\"line\"> 2. The Docker daemon pulled the <span class=\"string\">&quot;hello-world&quot;</span> image from the Docker Hub.</span><br><span class=\"line\">    (amd64)</span><br><span class=\"line\"> 3. The Docker daemon created a new container from that image <span class=\"built_in\">which</span> runs the</span><br><span class=\"line\">    executable that produces the output you are currently reading.</span><br><span class=\"line\"> 4. The Docker daemon streamed that output to the Docker client, <span class=\"built_in\">which</span> sent it</span><br><span class=\"line\">    to your terminal.</span><br><span class=\"line\"></span><br><span class=\"line\">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class=\"line\"> $ docker run -it ubuntu bash</span><br><span class=\"line\"></span><br><span class=\"line\">Share images, automate workflows, and more with a free Docker ID:</span><br><span class=\"line\"> https://hub.docker.com/</span><br><span class=\"line\"></span><br><span class=\"line\">For more examples and ideas, visit:</span><br><span class=\"line\"> https://docs.docker.com/get-started/</span><br><span class=\"line\"></span><br><span class=\"line\">/ <span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n\n<p>这样启动的 hello-world 会再宿主机上真实的启动一个容器</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">root@devops:~/poc# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE                                           COMMAND                  CREATED              STATUS                      PORTS                                                                      NAMES</span><br><span class=\"line\">174757c01f08   hello-world                                     <span class=\"string\">&quot;/hello&quot;</span>                 About a minute ago   Exited (0) 59 seconds ago                                                                              inspiring_morse</span><br><span class=\"line\">c0d09eee09a6   docker:latest                                   <span class=\"string\">&quot;dockerd-entrypoint.…&quot;</span>   About a minute ago   Up About a minute           2375-2376/tcp                                                              sharp_dubinsky</span><br><span class=\"line\">e244d45174b3   dockerhub.qingcloud.com/doubao/rancher:latest   <span class=\"string\">&quot;entrypoint.sh&quot;</span>          2 weeks ago          Up 39 minutes               0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp, :::443-&gt;443/tcp   rancher</span><br><span class=\"line\">root@devops:~/poc#</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h4><ul>\n<li><strong>简单性</strong>：设置和使用非常简单，快速上手。</li>\n<li><strong>性能</strong>：直接使用宿主机的 Docker 守护进程，避免了性能开销。</li>\n</ul>\n<h4 id=\"缺点\"><a href=\"#缺点\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><ul>\n<li><strong>安全风险</strong>：容器内应用拥有对宿主机 Docker 的完全控制，存在安全隐患。</li>\n<li><strong>环境污染</strong>：容器内的操作可能影响宿主机上的 Docker 环境，导致不一致性。</li>\n</ul>\n<h3 id=\"2-使用-Docker-的-DinD-镜像\"><a href=\"#2-使用-Docker-的-DinD-镜像\" class=\"headerlink\" title=\"2. 使用 Docker 的 DinD 镜像\"></a>2. 使用 Docker 的 DinD 镜像</h3><p>Docker 官方提供了一个名为 <code>docker:dind</code> 的镜像，专门用于在容器中运行 Docker。这种方式允许你在容器内启动一个独立的 Docker 守护进程。</p>\n<h4 id=\"验证-1\"><a href=\"#验证-1\" class=\"headerlink\" title=\"验证\"></a>验证</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@devops:~#  docker run --privileged  --name dind-container -d docker:latest</span><br><span class=\"line\">8cecade0bdc3e3a8de171caaf5706253bdc7920473512692a5f5ea6610725ef2</span><br><span class=\"line\">root@devops:~# docker exec -it dind-container sh</span><br><span class=\"line\">/ # docker run hello-world</span><br><span class=\"line\">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class=\"line\">latest: Pulling from library/hello-world</span><br><span class=\"line\">c1ec31eb5944: Pull complete</span><br><span class=\"line\">Digest: sha256:1408fec50309afee38f3535383f5b09419e6dc0925bc69891e79d84cc4cdcec6</span><br><span class=\"line\">Status: Downloaded newer image for hello-world:latest</span><br><span class=\"line\"></span><br><span class=\"line\">Hello from Docker!</span><br><span class=\"line\">This message shows that your installation appears to be working correctly.</span><br><span class=\"line\"></span><br><span class=\"line\">To generate this message, Docker took the following steps:</span><br><span class=\"line\"> 1. The Docker client contacted the Docker daemon.</span><br><span class=\"line\"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class=\"line\">    (amd64)</span><br><span class=\"line\"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class=\"line\">    executable that produces the output you are currently reading.</span><br><span class=\"line\"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class=\"line\">    to your terminal.</span><br><span class=\"line\"></span><br><span class=\"line\">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class=\"line\"> $ docker run -it ubuntu bash</span><br><span class=\"line\"></span><br><span class=\"line\">Share images, automate workflows, and more with a free Docker ID:</span><br><span class=\"line\"> https://hub.docker.com/</span><br><span class=\"line\"></span><br><span class=\"line\">For more examples and ideas, visit:</span><br><span class=\"line\"> https://docs.docker.com/get-started/</span><br><span class=\"line\"></span><br><span class=\"line\">/ # docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE         COMMAND    CREATED              STATUS                          PORTS     NAMES</span><br><span class=\"line\">1253974190f1   hello-world   &quot;/hello&quot;   About a minute ago   Exited (0) About a minute ago             thirsty_mclean</span><br><span class=\"line\">/ #</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>这样启动的 hello-world 只会在容器内启动，宿主机上是没有 hello-world 的容器。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@devops:~/poc# docker ps -a</span><br><span class=\"line\">CONTAINER ID   IMAGE                                           COMMAND                  CREATED              STATUS              PORTS                                                                      NAMES</span><br><span class=\"line\">8cecade0bdc3   docker:latest                                   <span class=\"string\">&quot;dockerd-entrypoint.…&quot;</span>   About a minute ago   Up About a minute   2375-2376/tcp                                                              dind-container</span><br><span class=\"line\">e244d45174b3   dockerhub.qingcloud.com/doubao/rancher:latest   <span class=\"string\">&quot;entrypoint.sh&quot;</span>          2 weeks ago          Up 56 minutes       0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp, :::443-&gt;443/tcp   rancher</span><br><span class=\"line\">root@devops:~/poc#</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"踩坑\"><a href=\"#踩坑\" class=\"headerlink\" title=\"踩坑\"></a>踩坑</h4><p>第一种 DinD 的启动方式，是直接挂载 sock，然后直接 docker run -it 容器 sh 就直接进入到容器中了，就可以直接操作容器内部的 docker。</p>\n<p>第二种 DinD 的启动方式，是没有挂载 sock，所以不可以直接 docker run -it 容器 sh，这样进入到容器中，docker 的 sock 还没有完全启动，所以需要先 docker run 启动容器，然后再 docker exec 进入容器，然后就可以操作容器内的 docker 了。</p>\n<h4 id=\"优点-1\"><a href=\"#优点-1\" class=\"headerlink\" title=\"优点\"></a>优点</h4><ul>\n<li><strong>官方支持</strong>：由 Docker 官方维护，确保兼容性和稳定性。</li>\n<li><strong>隔离性</strong>：每个 DinD 容器都有自己的 Docker 守护进程，彼此之间完全隔离。</li>\n</ul>\n<h4 id=\"缺点-1\"><a href=\"#缺点-1\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><ul>\n<li><strong>性能开销</strong>：由于在容器内管理 Docker，可能会引入额外的性能开销。</li>\n<li><strong>复杂性</strong>：需要配置网络和存储，以确保容器间的通信。</li>\n</ul>\n<h3 id=\"3-使用-Sysbox\"><a href=\"#3-使用-Sysbox\" class=\"headerlink\" title=\"3. 使用 Sysbox\"></a>3. 使用 Sysbox</h3><p>Sysbox 是一个增强型容器运行时，允许你在容器中运行完整的系统服务，包括 Docker。与直接挂载 Docker.sock 相比，Sysbox 提供了更好的隔离性。</p>\n<h4 id=\"验证-2\"><a href=\"#验证-2\" class=\"headerlink\" title=\"验证\"></a>验证</h4><p>由于需要更改 docker 的 runtime，由于现在的默认 runtimes 是 runc，更改成 sysbox 有挑战。目前没有技术知识，等后续。。。</p>\n<h4 id=\"优点-2\"><a href=\"#优点-2\" class=\"headerlink\" title=\"优点\"></a>优点</h4><ul>\n<li><strong>增强的隔离性</strong>：容器内的操作不会影响宿主机 Docker 环境。</li>\n<li><strong>支持复杂应用</strong>：可以在容器中运行更复杂的应用程序和服务。</li>\n</ul>\n<h4 id=\"缺点-2\"><a href=\"#缺点-2\" class=\"headerlink\" title=\"缺点\"></a>缺点</h4><ul>\n<li><strong>安装复杂性</strong>：需要额外的步骤来安装和配置 Sysbox。</li>\n<li><strong>性能开销</strong>：可能引入额外的性能开销。</li>\n</ul>\n","categories":["docker"],"tags":["docker"]},{"title":"docker containerd runc","url":"/docker/docker-containerd-runc/","content":"<h1 id=\"OCI-Open-Container-Initiative\"><a href=\"#OCI-Open-Container-Initiative\" class=\"headerlink\" title=\"OCI (Open Container Initiative)\"></a>OCI (Open Container Initiative)</h1><p>OCI（Open Container Initiative）即开放的容器运行时<strong>规范</strong>，目的在于定义一个容器运行时及镜像的相关标准和规范，其中包括</p>\n<ul>\n<li>runtime-spec：容器的生命周期管理，具体参考<a href=\"https://github.com/opencontainers/runtime-spec/blob/master/runtime.md\">runtime-spec</a>。</li>\n<li>image-spec：镜像的生命周期管理，具体参考<a href=\"https://github.com/opencontainers/image-spec/blob/main/spec.md\">image-spec</a>。</li>\n</ul>\n<p>实现 OCI 标准的容器运行时有<code>runc</code>，<code>kata</code>等。</p>\n<h1 id=\"CRI-Container-Runtime-Interface\"><a href=\"#CRI-Container-Runtime-Interface\" class=\"headerlink\" title=\"CRI (Container Runtime Interface)\"></a>CRI (Container Runtime Interface)</h1><p><strong>CRI 即容器运行时接口，主要用来定义 k8s 与容器运行时的 API 调用</strong>，kubelet 通过 CRI 来调用容器运行时，只要实现了 CRI 接口的容器运行时就可以对接到 k8s 的 kubelet 组件。</p>\n<p><img src=\"/docker/docker-containerd-runc/image-20240818154100206.png\" alt=\"image-20240818154100206\"></p>\n<span id=\"more\"></span>\n\n<h1 id=\"Containerd\"><a href=\"#Containerd\" class=\"headerlink\" title=\"Containerd\"></a>Containerd</h1><p><a href=\"https://github.com/containerd/containerd\">containerd</a> 是一个开源的容器运行时，可以管理和运行容器，是 Docker 默认使用的容器运行时，并实现了 CRI 规范。<br>containerd 通过其 CRI 插件实现了 Kubernetes 容器运行时接口（CRI），它可以管理容器的整个生命周期，包括从镜像的传输、存储到容器的执行、监控再到网络。</p>\n<h2 id=\"containerd-支持的-shim？\"><a href=\"#containerd-支持的-shim？\" class=\"headerlink\" title=\"containerd 支持的 shim？\"></a>containerd 支持的 shim？</h2><p>shim：垫片，一般用来表示对第三方组件 API 调用的适配插件，例如 k8s 使用 Dockershim 来实现对 docker 接口的适配调用。<br>Containerd 目前官方支持的 shim 清单：</p>\n<h3 id=\"io-containerd-runtime-v1-linux\"><a href=\"#io-containerd-runtime-v1-linux\" class=\"headerlink\" title=\"io.containerd.runtime.v1.linux\"></a>io.containerd.runtime.v1.linux</h3><p><code>io.containerd.runtime.v1.linux</code> 是最原始的 shim API 和实现的 v1 版本，在 Containerd 1.0 之前被设计出来。该 shim 使用 <code>runc</code> 来执行容器，并且只支持 <code>cgroup v1</code>。目前 v1 版 shim API 已被废弃，并将于 Containerd 2.0 被删除。</p>\n<h3 id=\"io-containerd-runc-v1\"><a href=\"#io-containerd-runc-v1\" class=\"headerlink\" title=\"io.containerd.runc.v1\"></a>io.containerd.runc.v1</h3><p><code>io.containerd.runc.v1</code> 与 <code>io.containerd.runtime.v1.linux</code> 的实现类似，唯一的区别是它使用了 v2 版本 shim API。该 shim 仍然只支持 cgroup v1。</p>\n<h3 id=\"io-containerd-runc-v2\"><a href=\"#io-containerd-runc-v2\" class=\"headerlink\" title=\"io.containerd.runc.v2\"></a>io.containerd.runc.v2</h3><p>该 shim 与 <strong>v1</strong> 采用了完全不同的实现，并且使用了 v2 版本 shim API，同时支持 cgroup v1 和 v2。该 shim 进程以运行多个容器，用于 Kubernetes 的 CRI 实现，可以在一个 Pod 中运行多个容器。</p>\n<h3 id=\"io-containerd-runhcs-v1\"><a href=\"#io-containerd-runhcs-v1\" class=\"headerlink\" title=\"io.containerd.runhcs.v1\"></a>io.containerd.runhcs.v1</h3><p>这是 Windows 平台的 shim，使用 Window 的 <code>HCSv2 API</code> 来管理容器。</p>\n<h1 id=\"CRI-O\"><a href=\"#CRI-O\" class=\"headerlink\" title=\"CRI-O\"></a>CRI-O</h1><p>CRI-O 是另一个实现了容器运行时接口（CRI）的高级别容器运行时，可以使用 OCI（开放容器倡议）兼容的运行时，它是 containerd 的一个替代品。<br>CRI-O 诞生于 RedHat、IBM、英特尔、SUSE、Hyper 等公司。它是专门从头开始创建的，作为 Kubernetes 的一个容器运行时，它提供了启动、停止和重启容器的能力，就像 containerd 一样。</p>\n<h1 id=\"RunC\"><a href=\"#RunC\" class=\"headerlink\" title=\"RunC\"></a>RunC</h1><p><a href=\"https://github.com/opencontainers/runc\">runc(run container)</a>是一个基于 OCI 标准实现的一个轻量级容器运行工具，用来创建和运行容器。而 Containerd 是用来维持通过 runc 创建的容器的运行状态。即 runc 用来创建和运行容器，containerd 作为常驻进程用来管理容器。<br>runc 包含 libcontainer，包括对 namespace 和 cgroup 的调用操作。<br>安装 docker 后，会自动安装 runc，linux 上可以直接运行 runc 命令。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">root@devops:/usr/bin# runc</span><br><span class=\"line\">NAME:</span><br><span class=\"line\">   runc - Open Container Initiative runtime</span><br><span class=\"line\"></span><br><span class=\"line\">runc is a <span class=\"built_in\">command</span> line client <span class=\"keyword\">for</span> running applications packaged according to</span><br><span class=\"line\">the Open Container Initiative (OCI) format and is a compliant implementation of the</span><br><span class=\"line\">Open Container Initiative specification.</span><br><span class=\"line\"></span><br><span class=\"line\">runc integrates well with existing process supervisors to provide a production</span><br><span class=\"line\">container runtime environment <span class=\"keyword\">for</span> applications. It can be used with your</span><br><span class=\"line\">existing process monitoring tools and the container will be spawned as a</span><br><span class=\"line\">direct child of the process supervisor.</span><br><span class=\"line\"></span><br><span class=\"line\">Containers are configured using bundles. A bundle <span class=\"keyword\">for</span> a container is a directory</span><br><span class=\"line\">that includes a specification file named <span class=\"string\">&quot;config.json&quot;</span> and a root filesystem.</span><br><span class=\"line\">The root filesystem contains the contents of the container.</span><br><span class=\"line\"></span><br><span class=\"line\">To start a new instance of a container:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># runc run [ -b bundle ] &lt;container-id&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Where <span class=\"string\">&quot;&lt;container-id&gt;&quot;</span> is your name <span class=\"keyword\">for</span> the instance of the container that you</span><br><span class=\"line\">are starting. The name you provide <span class=\"keyword\">for</span> the container instance must be unique on</span><br><span class=\"line\">your host. Providing the bundle directory using <span class=\"string\">&quot;-b&quot;</span> is optional. The default</span><br><span class=\"line\">value <span class=\"keyword\">for</span> <span class=\"string\">&quot;bundle&quot;</span> is the current directory.</span><br><span class=\"line\"></span><br><span class=\"line\">USAGE:</span><br><span class=\"line\">   runc [global options] <span class=\"built_in\">command</span> [<span class=\"built_in\">command</span> options] [arguments...]</span><br><span class=\"line\"></span><br><span class=\"line\">VERSION:</span><br><span class=\"line\">   1.7.19</span><br><span class=\"line\">commit: v1.1.13-0-g58aa920</span><br><span class=\"line\">spec: 1.0.2-dev</span><br><span class=\"line\">go: go1.21.12</span><br><span class=\"line\">libseccomp: 2.5.5</span><br><span class=\"line\"></span><br><span class=\"line\">COMMANDS:</span><br><span class=\"line\">   checkpoint  checkpoint a running container</span><br><span class=\"line\">   create      create a container</span><br><span class=\"line\">   delete      delete any resources held by the container often used with detached container</span><br><span class=\"line\">   events      display container events such as OOM notifications, cpu, memory, and IO usage statistics</span><br><span class=\"line\">   <span class=\"built_in\">exec</span>        execute new process inside the container</span><br><span class=\"line\">   <span class=\"built_in\">kill</span>        <span class=\"built_in\">kill</span> sends the specified signal (default: SIGTERM) to the container<span class=\"string\">&#x27;s init process</span></span><br><span class=\"line\"><span class=\"string\">   list        lists containers started by runc with the given root</span></span><br><span class=\"line\"><span class=\"string\">   pause       pause suspends all processes inside the container</span></span><br><span class=\"line\"><span class=\"string\">   ps          ps displays the processes running inside a container</span></span><br><span class=\"line\"><span class=\"string\">   restore     restore a container from a previous checkpoint</span></span><br><span class=\"line\"><span class=\"string\">   resume      resumes all processes that have been previously paused</span></span><br><span class=\"line\"><span class=\"string\">   run         create and run a container</span></span><br><span class=\"line\"><span class=\"string\">   spec        create a new specification file</span></span><br><span class=\"line\"><span class=\"string\">   start       executes the user defined process in a created container</span></span><br><span class=\"line\"><span class=\"string\">   state       output the state of a container</span></span><br><span class=\"line\"><span class=\"string\">   update      update container resource constraints</span></span><br><span class=\"line\"><span class=\"string\">   features    show the enabled features</span></span><br><span class=\"line\"><span class=\"string\">   help, h     Shows a list of commands or help for one command</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">GLOBAL OPTIONS:</span></span><br><span class=\"line\"><span class=\"string\">   --debug             enable debug logging</span></span><br><span class=\"line\"><span class=\"string\">   --log value         set the log file to write runc logs to (default is &#x27;</span>/dev/stderr<span class=\"string\">&#x27;)</span></span><br><span class=\"line\"><span class=\"string\">   --log-format value  set the log format (&#x27;</span>text<span class=\"string\">&#x27; (default), or &#x27;</span>json<span class=\"string\">&#x27;) (default: &quot;text&quot;)</span></span><br><span class=\"line\"><span class=\"string\">   --root value        root directory for storage of container state (this should be located in tmpfs) (default: &quot;/run/runc&quot;)</span></span><br><span class=\"line\"><span class=\"string\">   --criu value        path to the criu binary used for checkpoint and restore (default: &quot;criu&quot;)</span></span><br><span class=\"line\"><span class=\"string\">   --systemd-cgroup    enable systemd cgroup support, expects cgroupsPath to be of form &quot;slice:prefix:name&quot; for e.g. &quot;system.slice:runc:434234&quot;</span></span><br><span class=\"line\"><span class=\"string\">   --rootless value    ignore cgroup permission errors (&#x27;</span><span class=\"literal\">true</span><span class=\"string\">&#x27;, &#x27;</span><span class=\"literal\">false</span><span class=\"string\">&#x27;, or &#x27;</span>auto<span class=\"string\">&#x27;) (default: &quot;auto&quot;)</span></span><br><span class=\"line\"><span class=\"string\">   --help, -h          show help</span></span><br><span class=\"line\"><span class=\"string\">   --version, -v       print the version</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h1><p>从 Docker 1.11 版本开始，Docker 容器运行就不是简单通过 Docker Daemon 来启动了，而是通过集成 <a href=\"https://www.docker.com/blog/docker-engine-1-11-runc/\">containerd、runc</a> 等多个组件来完成的。</p>\n<p><img src=\"/docker/docker-containerd-runc/image-20240818151314490.png\" alt=\"image-20240818151314490\"></p>\n<!--more-->\n\n<p>每一个 Containerd 或 Docker 容器都有一个相应的 shim 守护进程，这个守护进程会提供一个 API，Containerd 使用该 API 来管理容器基本的生命周期（启动&#x2F;停止）。shim 还有一个作用是向 Containerd 报告容器的退出状态，在容器退出状态被 Containerd 收集之前，shim 会一直存在。这一点和僵尸进程很像，僵尸进程在被父进程回收之前会一直存在，只不过僵尸进程不会占用资源，而 shim 会占用资源。</p>\n<p>shim 将 Containerd 进程从容器的生命周期中分离出来，具体的做法是 runc 在创建和运行容器之后退出，并将 shim 作为容器的父进程，即使 Containerd 进程挂掉或者重启，也不会对容器造成任何影响。这样做的好处，可以在线升级或者重启 Containerd，不会对运行中的容器产生任何影响。Docker 的 <a href=\"https://icloudnative.io/go/?target=aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vY29uZmlnL2NvbnRhaW5lcnMvbGl2ZS1yZXN0b3JlLw==\">–live-restore</a> 特征也实现了类似的功能。</p>\n<h1 id=\"docker-和-k8s-管理容器的关系图\"><a href=\"#docker-和-k8s-管理容器的关系图\" class=\"headerlink\" title=\"docker 和 k8s 管理容器的关系图\"></a>docker 和 k8s 管理容器的关系图</h1><p>关系流程如下</p>\n<ul>\n<li><p>Docker，Kubernetes 等工具来运行一个容器时会调用容器运行时（CRI）比如 containerd，CRI-O</p>\n</li>\n<li><p>通过容器运行时来完成容器的创建、运行、销毁等实际工作</p>\n</li>\n<li><p>Docker 使用的是 containerd 作为其运行时；Kubernetes 支持 containerd，CRI-O 等多种容器运行时</p>\n</li>\n<li><p>这些容器运行时都遵循了 OCI 规范，并通过 runc 来实现与操作系统内核交互来完成容器的创建和运行</p>\n</li>\n</ul>\n<p><img src=\"/docker/docker-containerd-runc/image-20240818154926633.png\" alt=\"image-20240818154926633\"></p>\n","categories":["docker"],"tags":["docker"]},{"title":"rime","url":"/rime/rime-customize-config/","content":"<h1 id=\"安装-rime\"><a href=\"#安装-rime\" class=\"headerlink\" title=\"安装 rime\"></a>安装 rime</h1><p>‌‌‌ 根据官方网站安装即可 <a href=\"https://github.com/rime/weasel\">rime</a></p>\n<h1 id=\"安装薄荷输入法\"><a href=\"#安装薄荷输入法\" class=\"headerlink\" title=\"安装薄荷输入法\"></a>安装薄荷输入法</h1><p>‌‌‌ 根据官方网站安装即可 <a href=\"https://github.com/Mintimate/oh-my-rime\">oh-my-rime</a></p>\n<h1 id=\"自定义输入法皮肤配色\"><a href=\"#自定义输入法皮肤配色\" class=\"headerlink\" title=\"自定义输入法皮肤配色\"></a>自定义输入法皮肤配色</h1><p>‌‌‌ 根据官方文档操作即可，下面文档中有详细介绍皮肤各个地方的参数，如何更改。<a href=\"https://github.com/rime/weasel/wiki\">rime-wiki</a>。‌ 也可以使用在线编辑的网友来自定义更改，下面有三个</p>\n<ul>\n<li><p><a href=\"https://pdog18.github.io/rime-soak/#/theme\">https://pdog18.github.io/rime-soak/#/theme</a></p>\n</li>\n<li><p><a href=\"https://owlzou.github.io/weasel-theme-editor/\">https://owlzou.github.io/weasel-theme-editor/</a></p>\n</li>\n<li><p><a href=\"https://fxliang.github.io/RimeSeeMe/\">https://fxliang.github.io/RimeSeeMe/</a></p>\n<span id=\"more\"></span></li>\n</ul>\n<h1 id=\"自用输入法皮肤配色\"><a href=\"#自用输入法皮肤配色\" class=\"headerlink\" title=\"自用输入法皮肤配色\"></a>自用输入法皮肤配色</h1><p>‌‌‌ 由于自己平时使用搜狗输入法居多，所以习惯了搜狗输入法的默认皮肤，基于<code>小鹤飞扬／flypy</code>配色主题更改了自己喜好的配色。<br>‌‌‌ 下面的 yaml 文件需要放在<code>用户文件夹</code>下的<code>weasel.custom.yaml</code>中</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#patch:</span></span><br><span class=\"line\"><span class=\"comment\">#  style/horizontal: true</span></span><br><span class=\"line\"><span class=\"comment\">#  style/color_scheme: soak</span></span><br><span class=\"line\"><span class=\"comment\">#  style/layout/margin_x: 9</span></span><br><span class=\"line\"><span class=\"comment\">#  style/layout/margin_y: 6</span></span><br><span class=\"line\"><span class=\"comment\">#  preset_color_schemes:</span></span><br><span class=\"line\"><span class=\"comment\">#    soak:</span></span><br><span class=\"line\"><span class=\"comment\">#      text_color: 0</span></span><br><span class=\"line\"><span class=\"comment\">#      back_color: 16382457</span></span><br><span class=\"line\"><span class=\"comment\">#      border_color: 13027014</span></span><br><span class=\"line\"><span class=\"comment\">#      label_color: 16744448</span></span><br><span class=\"line\"><span class=\"comment\">#      hilited_text_color: 16744448</span></span><br><span class=\"line\"><span class=\"comment\">#      hilited_back_color: 16777215</span></span><br><span class=\"line\"><span class=\"comment\">#      candidate_text_color: 16744448</span></span><br><span class=\"line\"><span class=\"comment\">#      comment_text_color: 16744448</span></span><br><span class=\"line\"><span class=\"comment\">#      hilited_candidate_text_color: 176</span></span><br><span class=\"line\"><span class=\"comment\">#      hilited_comment_text_color: 176</span></span><br><span class=\"line\"><span class=\"comment\">#      hilited_candidate_back_color: 16777215</span></span><br><span class=\"line\"><span class=\"comment\">#      hilited_label_color: 5592522</span></span><br><span class=\"line\"><span class=\"string\">‌‌‌</span>　　<span class=\"attr\">patch:</span></span><br><span class=\"line\">  <span class=\"attr\">menu/page_size:</span> <span class=\"number\">9</span></span><br><span class=\"line\">  <span class=\"attr\">style/horizontal:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">style/color_scheme:</span> <span class=\"string\">soak</span></span><br><span class=\"line\">  <span class=\"attr\">style/layout/margin_x:</span> <span class=\"number\">9</span></span><br><span class=\"line\">  <span class=\"attr\">style/layout/margin_y:</span> <span class=\"number\">6</span></span><br><span class=\"line\">  <span class=\"attr\">preset_color_schemes:</span></span><br><span class=\"line\">    <span class=\"attr\">soak:</span></span><br><span class=\"line\">      <span class=\"attr\">text_color:</span> <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"attr\">back_color:</span> <span class=\"number\">16250871</span></span><br><span class=\"line\">      <span class=\"attr\">border_color:</span> <span class=\"number\">13027014</span></span><br><span class=\"line\">      <span class=\"attr\">label_color:</span> <span class=\"number\">16744448</span></span><br><span class=\"line\">      <span class=\"attr\">hilited_text_color:</span> <span class=\"number\">16744448</span></span><br><span class=\"line\">      <span class=\"attr\">hilited_back_color:</span> <span class=\"number\">16777215</span></span><br><span class=\"line\">      <span class=\"attr\">candidate_text_color:</span> <span class=\"number\">16744448</span></span><br><span class=\"line\">      <span class=\"attr\">comment_text_color:</span> <span class=\"number\">16744448</span></span><br><span class=\"line\">      <span class=\"attr\">hilited_candidate_text_color:</span> <span class=\"number\">1381881</span></span><br><span class=\"line\">      <span class=\"attr\">hilited_comment_text_color:</span> <span class=\"number\">1381881</span></span><br><span class=\"line\">      <span class=\"attr\">hilited_candidate_back_color:</span> <span class=\"number\">16777215</span></span><br><span class=\"line\">      <span class=\"attr\">hilited_label_color:</span> <span class=\"number\">5592522</span></span><br></pre></td></tr></table></figure>\n\n<p>‌‌‌ 如果想更改候选词圆角的话，需要更改<code>用户文件夹</code>下<code>weasel.yaml</code>中<code>layout</code>下面的配置。由于我只使用这一个皮肤，所以把 rime 自带的皮肤配色都删除了。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Weasel settings</span></span><br><span class=\"line\"><span class=\"comment\"># encoding: utf-8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 感谢 @[Mirtle](https://github.com/mirtlecn) 整理</span></span><br><span class=\"line\"><span class=\"comment\"># Rime 定制指南 &lt;https://github.com/rime/home/wiki/CustomizationGuide#定製指南&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Weasel 定制文档 &lt;https://github.com/rime/weasel/wiki/Weasel-定製化&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># Weasel 字体设定 &lt;https://github.com/rime/weasel/wiki/字體設定&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 部分选项需要将 Weasel 更新至最新开发版才能生效</span></span><br><span class=\"line\"><span class=\"string\">‌‌‌</span>　　<span class=\"attr\">config_version:</span> <span class=\"string\">&quot;2024-03-02&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># [app_options]</span></span><br><span class=\"line\"><span class=\"comment\"># 针对特定应用的设置</span></span><br><span class=\"line\"><span class=\"string\">‌‌‌</span>　　<span class=\"attr\">app_options:</span></span><br><span class=\"line\">  <span class=\"attr\">firefox.exe:</span></span><br><span class=\"line\">    <span class=\"attr\">inline_preedit:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 行内显示预编辑区：规避 &lt;https://github.com/rime/weasel/issues/946&gt;</span></span><br><span class=\"line\">  <span class=\"attr\">iexplore.exe:</span></span><br><span class=\"line\">    <span class=\"attr\">inline_preedit:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 兼容 IE</span></span><br><span class=\"line\">  <span class=\"attr\">browser.exe:</span></span><br><span class=\"line\">    <span class=\"attr\">inline_preedit:</span> <span class=\"literal\">true</span> <span class=\"comment\"># 兼容 Yandex</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># [global settings]</span></span><br><span class=\"line\"><span class=\"string\">‌‌‌</span>　　<span class=\"attr\">show_notifications:</span> <span class=\"literal\">true</span>                   <span class=\"comment\"># 是否显示状态变化的通知：true；false；option_list（方案内的开头 option）</span></span><br><span class=\"line\"><span class=\"string\">‌‌‌</span>　　<span class=\"attr\">show_notifications_time:</span> <span class=\"number\">1200</span>              <span class=\"comment\"># 通知显示的时间，单位 ms</span></span><br><span class=\"line\"><span class=\"string\">‌‌‌</span>　　<span class=\"attr\">global_ascii:</span> <span class=\"literal\">false</span>                        <span class=\"comment\"># 切换为 ascii 模式时，是否影响所有窗口：true；false</span></span><br><span class=\"line\"><span class=\"comment\"># [End of &lt;global settings&gt;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># [style]</span></span><br><span class=\"line\"><span class=\"comment\"># 字体；候选项、候选窗口的行为、布局及样式</span></span><br><span class=\"line\"><span class=\"string\">‌‌‌</span>　　<span class=\"attr\">style:</span></span><br><span class=\"line\">  <span class=\"attr\">color_scheme:</span> <span class=\"string\">mint_light_blue</span>             <span class=\"comment\"># 默认配色方案</span></span><br><span class=\"line\">  <span class=\"attr\">color_scheme_dark:</span> <span class=\"string\">mint_dark_blue</span>         <span class=\"comment\"># 深色模式下，Weasel 的配色方案，Windows 10 1809+ 可用</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># 全局字体</span></span><br><span class=\"line\">  <span class=\"comment\"># 格式：字体1:起始码位:结束码位:字重:字形,字体2……，字体会依次 fallback</span></span><br><span class=\"line\">  <span class=\"comment\"># 详细设定请参考 &lt;https://github.com/rime/weasel/wiki/字體設定&gt;</span></span><br><span class=\"line\">  <span class=\"attr\">font_face:</span> <span class=\"string\">&quot;Segoe UI Emoji:30:39, Segoe UI Emoji:23:23, Segoe UI Emoji:2a:2a, Segoe UI Emoji:fe0f:fe0f, Segoe UI Emoji:20e3:20e3, Microsoft YaHei, SF Pro, Segoe UI Emoji, Noto Color Emoji&quot;</span></span><br><span class=\"line\">  <span class=\"attr\">label_font_face:</span> <span class=\"string\">&quot;Microsoft YaHei&quot;</span>       <span class=\"comment\"># 标签字体</span></span><br><span class=\"line\">  <span class=\"attr\">comment_font_face:</span> <span class=\"string\">&quot;Microsoft YaHei&quot;</span>     <span class=\"comment\"># 注释字体</span></span><br><span class=\"line\">  <span class=\"attr\">font_point:</span> <span class=\"number\">12</span>                           <span class=\"comment\"># 全局字体字号</span></span><br><span class=\"line\">  <span class=\"attr\">label_font_point:</span> <span class=\"number\">12</span>                     <span class=\"comment\"># 标签字体字号，不设定 fallback 到 font_point</span></span><br><span class=\"line\">  <span class=\"attr\">comment_font_point:</span> <span class=\"number\">10</span>                   <span class=\"comment\"># 注释字体字号，不设定 fallback 到 font_point</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">inline_preedit:</span> <span class=\"literal\">false</span>                     <span class=\"comment\"># 行内显示预编辑区：true；false</span></span><br><span class=\"line\">  <span class=\"attr\">preedit_type:</span> <span class=\"string\">composition</span>                <span class=\"comment\"># 预编辑区内容：composition（编码）； preview（选中的候选）；preview_all（全部候选）</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">fullscreen:</span> <span class=\"literal\">false</span>                        <span class=\"comment\"># 候选窗口全屏显示：true；false</span></span><br><span class=\"line\">  <span class=\"attr\">vertical_text:</span> <span class=\"literal\">false</span>                     <span class=\"comment\"># 竖排文本：true；false</span></span><br><span class=\"line\">  <span class=\"comment\"># text_orientation: horizontal           # 文本排列方向，效果和 `vertical_text` 相同：horizontal；vertical</span></span><br><span class=\"line\">  <span class=\"attr\">candidate_list_layout:</span> <span class=\"string\">stacked</span>           <span class=\"comment\"># stacked | linear  候选项排列方向（似乎只有在custom内才可以生效）</span></span><br><span class=\"line\">  <span class=\"attr\">horizontal:</span> <span class=\"literal\">false</span>                        <span class=\"comment\"># 候选项水平排列（在custom内和andidate_list_layout的linear效果一样）</span></span><br><span class=\"line\">  <span class=\"attr\">vertical_text_left_to_right:</span> <span class=\"literal\">false</span>       <span class=\"comment\"># 竖排方向是否从左到右：true；false</span></span><br><span class=\"line\">  <span class=\"attr\">vertical_text_with_wrap:</span> <span class=\"literal\">false</span>           <span class=\"comment\"># 文本竖排模式下，自动换行：true；false</span></span><br><span class=\"line\">  <span class=\"attr\">vertical_auto_reverse:</span> <span class=\"literal\">false</span>             <span class=\"comment\"># 文本竖排模式下，候选窗口位于光标上方时倒序排列：true；false</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">label_format:</span> <span class=\"string\">&quot;%s&quot;</span>                       <span class=\"comment\"># 标签字符：例如 %s. 效果为 1. 2. 3. ....</span></span><br><span class=\"line\">  <span class=\"attr\">mark_text:</span> <span class=\"string\">&quot;|&quot;</span>                           <span class=\"comment\"># 标记字符，显示在选中的候选标签前，需要在配色方案中指定颜色；如该项为空字符串 &quot;&quot; 而配色方案中 hilited_mark_color 非透明色，则显示 Windows 11 输入法风格标记</span></span><br><span class=\"line\">  <span class=\"attr\">ascii_tip_follow_cursor:</span> <span class=\"literal\">false</span>           <span class=\"comment\"># 切换 ASCII 模式时，提示跟随鼠标，而非输入光标</span></span><br><span class=\"line\">  <span class=\"attr\">enhanced_position:</span> <span class=\"literal\">true</span>                  <span class=\"comment\"># 无法定位候选框时，在窗口左上角显示候选框：true；false</span></span><br><span class=\"line\">  <span class=\"attr\">display_tray_icon:</span> <span class=\"literal\">false</span>                 <span class=\"comment\"># 托盘显示独立于语言栏的额外图标：true；false</span></span><br><span class=\"line\">  <span class=\"attr\">antialias_mode:</span> <span class=\"string\">default</span>                  <span class=\"comment\"># 次像素反锯齿设定：default；force_dword；cleartype；grayscale；aliased</span></span><br><span class=\"line\">  <span class=\"attr\">candidate_abbreviate_length:</span> <span class=\"number\">30</span>          <span class=\"comment\"># 候选项略写，超过此数字则用省略号代替。设置为 0 则不启用此功能</span></span><br><span class=\"line\">  <span class=\"attr\">mouse_hover_ms:</span> <span class=\"number\">0</span>                        <span class=\"comment\"># ! 已弃用。鼠标悬停选词响应时间（ms），设置为 0 时禁用该功能</span></span><br><span class=\"line\">  <span class=\"attr\">hover_type:</span> <span class=\"string\">none</span>                         <span class=\"comment\"># 鼠标在候选窗口悬停时：none（无动作）；hilite（选中鼠标下的候选）；semi_hilite（高亮鼠标下的候选）</span></span><br><span class=\"line\">  <span class=\"attr\">paging_on_scroll:</span> <span class=\"literal\">true</span>                   <span class=\"comment\"># 在候选窗口上滑动滚轮的行为：true（翻页）；false （选中下一个候选）</span></span><br><span class=\"line\">  <span class=\"attr\">click_to_capture:</span> <span class=\"literal\">false</span>                  <span class=\"comment\"># 鼠标点击候选项，创建截图：true；false</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">layout:</span></span><br><span class=\"line\">    <span class=\"attr\">baseline:</span> <span class=\"number\">0</span>                            <span class=\"comment\"># 字号百分比，与 linespacing 一同设置可解决字体跳动问题，设置为 0 为禁用</span></span><br><span class=\"line\">    <span class=\"attr\">linespacing:</span> <span class=\"number\">0</span>                         <span class=\"comment\"># 字号百分比，参考 &lt;https://github.com/rime/weasel/pull/1177&gt;</span></span><br><span class=\"line\">    <span class=\"attr\">align_type:</span> <span class=\"string\">center</span>                     <span class=\"comment\"># 标签、候选文字、注解文字之间的相对对齐方式：top ; center ; bottom</span></span><br><span class=\"line\">    <span class=\"attr\">max_height:</span> <span class=\"number\">600</span>                        <span class=\"comment\"># 候选框最大高度，horizontal 布局如宽超此尺寸则换行显示候选，设置为 0 不启用此功能</span></span><br><span class=\"line\">    <span class=\"attr\">max_width:</span> <span class=\"number\">0</span>                           <span class=\"comment\"># 候选框最大宽度，文本竖排模式下如高度超此尺寸则换列显示候选，设置为 0 不启用此功能</span></span><br><span class=\"line\">    <span class=\"attr\">min_height:</span> <span class=\"number\">0</span>                          <span class=\"comment\"># 候选框最小高度</span></span><br><span class=\"line\">    <span class=\"attr\">min_width:</span> <span class=\"number\">145</span>                          <span class=\"comment\"># 候选框最小宽度</span></span><br><span class=\"line\">    <span class=\"attr\">border_width:</span> <span class=\"number\">0</span>                        <span class=\"comment\"># 边框宽度；又名 border</span></span><br><span class=\"line\">    <span class=\"attr\">margin_x:</span> <span class=\"number\">8</span>                            <span class=\"comment\"># 主体元素和候选框的左右边距；为负值时，不显示候选框</span></span><br><span class=\"line\">    <span class=\"attr\">margin_y:</span> <span class=\"number\">8</span>                            <span class=\"comment\"># 主体元素的上下边距；为负值时，不显示候选框</span></span><br><span class=\"line\">    <span class=\"attr\">spacing:</span> <span class=\"number\">10</span>                            <span class=\"comment\"># inline_preedit 为否时，编码区域和候选区域的间距</span></span><br><span class=\"line\">    <span class=\"attr\">candidate_spacing:</span> <span class=\"number\">22</span>                  <span class=\"comment\"># 候选项之间的间距</span></span><br><span class=\"line\">    <span class=\"attr\">hilite_spacing:</span> <span class=\"number\">6</span>                      <span class=\"comment\"># 候选项和相应标签的间距</span></span><br><span class=\"line\">    <span class=\"attr\">hilite_padding:</span> <span class=\"number\">8</span>                      <span class=\"comment\"># 高亮区域和内部文字的间距，影响高亮区域大小</span></span><br><span class=\"line\">    <span class=\"comment\"># hilite_padding_x: 8                  # 高亮区域和内部文字的左右间距，如无特殊指定则依 hilite_padding 设置</span></span><br><span class=\"line\">    <span class=\"comment\"># hilite_padding_y: 8                  # 高亮区域和内部文字的上下间距，如无特殊指定则依 hilite_padding 设置</span></span><br><span class=\"line\">    <span class=\"attr\">shadow_radius:</span> <span class=\"number\">0</span>                       <span class=\"comment\"># 阴影区域半径，为 0 不显示阴影；需要同时在配色方案中指定非透明的阴影颜色</span></span><br><span class=\"line\">    <span class=\"attr\">shadow_offset_x:</span> <span class=\"number\">4</span>                     <span class=\"comment\"># 阴影左右偏移距离</span></span><br><span class=\"line\">    <span class=\"attr\">shadow_offset_y:</span> <span class=\"number\">4</span>                     <span class=\"comment\"># 阴影上下偏移距离</span></span><br><span class=\"line\">    <span class=\"attr\">corner_radius:</span> <span class=\"number\">4</span>                       <span class=\"comment\"># 候选窗口圆角半径</span></span><br><span class=\"line\">    <span class=\"attr\">round_corner:</span> <span class=\"number\">8</span>                        <span class=\"comment\"># 候选背景色块圆角半径，又名 hilited_corner_radius</span></span><br><span class=\"line\">    <span class=\"comment\"># type: vertical                       # 布局设置，效果和 style 下的设置相同：</span></span><br><span class=\"line\">                                           <span class=\"comment\"># horizontal（横向）；vertical（竖向） ; vertical_text（竖排文本） ; vertical+fullscreen（全屏） ; horizontal+fullscreen（横向全屏）</span></span><br><span class=\"line\"><span class=\"comment\"># [End of &lt;style&gt;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># [preset_color_schemes]</span></span><br><span class=\"line\"><span class=\"comment\"># 配色设定</span></span><br><span class=\"line\"><span class=\"comment\"># 在小狼毫用户目录新建 preview 文件夹，将自定义皮肤的截图重命名为 color_scheme_&lt;name&gt;.png 放入此文件夹，可以在「输入法设定」中看到自定义皮肤效果</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 小狼毫配色在线设计：</span></span><br><span class=\"line\"><span class=\"comment\"># [RIME 西米](https://fxliang.github.io/RimeSeeMe/)</span></span><br><span class=\"line\"><span class=\"comment\"># [润笔](https://pdog18.github.io/rime-soak/#/theme)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># [小狼毫配色详解](https://github.com/rime/weasel/wiki/定制小狼毫配色)</span></span><br></pre></td></tr></table></figure>\n\n<p>‌‌‌</p>\n","categories":["rime"],"tags":["rime"]},{"title":"hexo文件夹大小写","url":"/hexo/hexo-filename-case/","content":"<h1 id=\"hexo-生成文件大小写问题\"><a href=\"#hexo-生成文件大小写问题\" class=\"headerlink\" title=\"hexo 生成文件大小写问题\"></a>hexo 生成文件大小写问题</h1><p>将<code>_config.yaml</code>中的配置更改。清理后重新生成新的文件夹就是小写的。</p>\n<p>默认是<code>0</code>，文件夹首字母是大写的。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">filename_case: 1</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"hexo-设置-category-页面分类小写\"><a href=\"#hexo-设置-category-页面分类小写\" class=\"headerlink\" title=\"hexo 设置 category 页面分类小写\"></a>hexo 设置 category 页面分类小写</h1><p>找到主题文件夹中的 layout 目录，我的是<code>D:\\hexo\\themes\\next\\layout\\category.njk</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">extends</span> <span class=\"string\">&#x27;_layout.njk&#x27;</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">import</span> <span class=\"string\">&#x27;_macro/post-collapse.njk&#x27;</span> <span class=\"string\">as</span> <span class=\"string\">post_template</span> <span class=\"string\">with</span> <span class=\"string\">context</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">import</span> <span class=\"string\">&#x27;_macro/sidebar.njk&#x27;</span> <span class=\"string\">as</span> <span class=\"string\">sidebar_template</span> <span class=\"string\">with</span> <span class=\"string\">context</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"comment\">#####注释掉，不想显示 ###&#125;</span></span><br><span class=\"line\"> &#123;<span class=\"comment\">###&#123;% block title %&#125;&#123;&#123; __(&#x27;title.category&#x27;) &#125;&#125;: &#123;&#123; page.category &#125;&#125; | &#123;&#123; title &#125;&#125;&#123;% endblock %&#125;###&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">title</span> <span class=\"string\">%</span>&#125; &#123;&#123; <span class=\"string\">page.category.toLowerCase()</span> &#125;&#125; <span class=\"string\">|</span> &#123;&#123; <span class=\"string\">title</span> &#125;&#125;&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">class</span> <span class=\"string\">%</span>&#125;<span class=\"string\">category</span> <span class=\"string\">posts-collapse</span>&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">content</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"comment\">######################&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">### CATEGORY BLOCK ###&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">######################&#125;</span></span><br><span class=\"line\">  <span class=\"string\">&lt;div</span> <span class=\"string\">class=&quot;post-block&quot;&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;div</span> <span class=\"string\">class=&quot;post-content&quot;&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;div</span> <span class=\"string\">class=&quot;collection-title&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;h1</span> <span class=\"string\">class=&quot;collection-header&quot;&gt;</span></span><br><span class=\"line\">\t\t&#123;<span class=\"comment\">#####这里设置，添加toLowerCase()，不然是驼峰大写命名法###&#125;</span></span><br><span class=\"line\">          &#123;&#123;<span class=\"bullet\">-</span> <span class=\"string\">page.category.toLowerCase()</span> &#125;&#125;</span><br><span class=\"line\">          &#123;<span class=\"comment\">####注释掉，不想显示 &lt;small&gt;&#123;&#123; __(&#x27;title.category&#x27;) &#125;&#125;&lt;/small&gt;###&#125;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;/h1&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/div&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;&#123; <span class=\"string\">post_template.render(page.posts)</span> &#125;&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;/div&gt;</span></span><br><span class=\"line\">  <span class=\"string\">&lt;/div&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">##########################&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">### END CATEGORY BLOCK ###&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">##########################&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">include</span> <span class=\"string\">&#x27;_partials/pagination.njk&#x27;</span> <span class=\"string\">-%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">sidebar</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">  &#123;&#123; <span class=\"string\">sidebar_template.render(false)</span> &#125;&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h1 id=\"hexo-设置-tag-页面标签小写\"><a href=\"#hexo-设置-tag-页面标签小写\" class=\"headerlink\" title=\"hexo 设置 tag 页面标签小写\"></a>hexo 设置 tag 页面标签小写</h1><p>找到主题文件夹中的 layout 目录，我的是<code>D:\\hexo\\themes\\next\\layout\\tag.njk</code></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">extends</span> <span class=\"string\">&#x27;_layout.njk&#x27;</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">import</span> <span class=\"string\">&#x27;_macro/post-collapse.njk&#x27;</span> <span class=\"string\">as</span> <span class=\"string\">post_template</span> <span class=\"string\">with</span> <span class=\"string\">context</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">import</span> <span class=\"string\">&#x27;_macro/sidebar.njk&#x27;</span> <span class=\"string\">as</span> <span class=\"string\">sidebar_template</span> <span class=\"string\">with</span> <span class=\"string\">context</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"comment\">####注释掉，不想显示####&#125;</span></span><br><span class=\"line\">&#123;<span class=\"comment\">####&#123;% block title %&#125;&#123;&#123; __(&#x27;title.tag&#x27;) &#125;&#125;: &#123;&#123; page.tag.toLowerCase() &#125;&#125; | &#123;&#123; title &#125;&#125;&#123;% endblock %&#125;####&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">title</span> <span class=\"string\">%</span>&#125; &#123;&#123; <span class=\"string\">page.tag.toLowerCase()</span> &#125;&#125; <span class=\"string\">|</span> &#123;&#123; <span class=\"string\">title</span> &#125;&#125;&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">class</span> <span class=\"string\">%</span>&#125;<span class=\"string\">tag</span> <span class=\"string\">posts-collapse</span>&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">content</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"comment\">#################&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">### TAG BLOCK ###&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">#################&#125;</span></span><br><span class=\"line\">  <span class=\"string\">&lt;div</span> <span class=\"string\">class=&quot;post-block&quot;&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;div</span> <span class=\"string\">class=&quot;post-content&quot;&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;div</span> <span class=\"string\">class=&quot;collection-title&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;h1</span> <span class=\"string\">class=&quot;collection-header&quot;&gt;</span></span><br><span class=\"line\">          &#123;&#123;<span class=\"bullet\">-</span> <span class=\"string\">page.tag.toLowerCase()</span> &#125;&#125;</span><br><span class=\"line\">          &#123;<span class=\"comment\">####注释掉，不想显示 &lt;small&gt;&#123;&#123; __(&#x27;title.tag&#x27;) &#125;&#125;&lt;/small&gt;####&#125;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;/h1&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/div&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;&#123; <span class=\"string\">post_template.render(page.posts)</span> &#125;&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;/div&gt;</span></span><br><span class=\"line\">  <span class=\"string\">&lt;/div&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">#####################&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">### END TAG BLOCK ###&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"comment\">#####################&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">include</span> <span class=\"string\">&#x27;_partials/pagination.njk&#x27;</span> <span class=\"string\">-%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">block</span> <span class=\"string\">sidebar</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">  &#123;&#123; <span class=\"string\">sidebar_template.render(false)</span> &#125;&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">%</span> <span class=\"string\">endblock</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"hexo-设置首页中文章的分类于小写\"><a href=\"#hexo-设置首页中文章的分类于小写\" class=\"headerlink\" title=\"hexo 设置首页中文章的分类于小写\"></a>hexo 设置首页中文章的分类于小写</h1><p>找到主题文件夹中的 layout 目录，我的是<code>D:\\hexo\\themes\\next\\layout\\_partials\\post\\post-meta.njk</code></p>\n<p> 将在<code>cat.name</code>后面添加<code>.toLowerCase()</code>。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&lt;div</span> <span class=\"string\">class=&quot;post-meta&quot;&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">set</span> <span class=\"string\">date_diff</span> <span class=\"string\">=</span> <span class=\"string\">date(post.date)</span> <span class=\"type\">!=</span> <span class=\"string\">date(post.updated)</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">set</span> <span class=\"string\">time_diff</span> <span class=\"string\">=</span> <span class=\"string\">time(post.date)</span> <span class=\"type\">!=</span> <span class=\"string\">time(post.updated)</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">theme.post_meta.created_at</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item&quot;&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;far</span> <span class=\"string\">fa-calendar&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-text&quot;&gt;&#123;&#123;</span> <span class=\"string\">__(&#x27;post.posted&#x27;)</span> <span class=\"string\">&#125;&#125;&lt;/span&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">not</span> <span class=\"string\">date_diff</span> <span class=\"string\">and</span> <span class=\"string\">time_diff</span> <span class=\"string\">and</span> <span class=\"string\">theme.post_meta.updated_at.enable</span> <span class=\"string\">and</span> <span class=\"string\">theme.post_meta.updated_at.another_day</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"string\">%-</span> <span class=\"string\">set</span> <span class=\"string\">create_title</span> <span class=\"string\">=</span> <span class=\"string\">__(&#x27;post.created&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">__(&#x27;symbol.colon&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">full_date(post.date)</span> <span class=\"string\">+</span> <span class=\"string\">&#x27; / &#x27;</span> <span class=\"string\">+</span> <span class=\"string\">__(&#x27;post.modified&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">__(&#x27;symbol.colon&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">time(post.updated)</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">      &#123;<span class=\"string\">%</span> <span class=\"string\">else</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"string\">%-</span> <span class=\"string\">set</span> <span class=\"string\">create_title</span> <span class=\"string\">=</span> <span class=\"string\">__(&#x27;post.created&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">__(&#x27;symbol.colon&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">full_date(post.date)</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">      &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"string\">&lt;time</span> <span class=\"string\">title=&quot;&#123;&#123;</span> <span class=\"string\">create_title</span> <span class=\"string\">&#125;&#125;&quot;</span> <span class=\"string\">itemprop=&quot;dateCreated</span> <span class=\"string\">datePublished&quot;</span> <span class=\"string\">datetime=&quot;&#123;&#123;</span> <span class=\"string\">moment(post.date).format()</span> <span class=\"string\">&#125;&#125;&quot;&gt;&#123;&#123;</span> <span class=\"string\">date(post.date)</span> <span class=\"string\">&#125;&#125;&lt;/time&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">theme.post_meta.updated_at.enable</span> <span class=\"string\">and</span> <span class=\"string\">(not</span> <span class=\"string\">theme.post_meta.updated_at.another_day</span> <span class=\"string\">or</span> <span class=\"string\">date_diff</span> <span class=\"string\">or</span> <span class=\"string\">not</span> <span class=\"string\">theme.post_meta.created_at)</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item&quot;&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;far</span> <span class=\"string\">fa-calendar-check&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-text&quot;&gt;&#123;&#123;</span> <span class=\"string\">__(&#x27;post.edited&#x27;)</span> <span class=\"string\">&#125;&#125;&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;time</span> <span class=\"string\">title=&quot;&#123;&#123;</span> <span class=\"string\">__(&#x27;post.modified&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">__(&#x27;symbol.colon&#x27;)</span> <span class=\"string\">+</span> <span class=\"string\">full_date(post.updated)</span> <span class=\"string\">&#125;&#125;&quot;</span> <span class=\"string\">itemprop=&quot;dateModified&quot;</span> <span class=\"string\">datetime=&quot;&#123;&#123;</span> <span class=\"string\">moment(post.updated).format()</span> <span class=\"string\">&#125;&#125;&quot;&gt;&#123;&#123;</span> <span class=\"string\">date(post.updated)</span> <span class=\"string\">&#125;&#125;&lt;/time&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">post.categories</span> <span class=\"string\">and</span> <span class=\"string\">post.categories.length</span> <span class=\"string\">and</span> <span class=\"string\">theme.post_meta.categories</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item&quot;&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;far</span> <span class=\"string\">fa-folder&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-text&quot;&gt;&#123;&#123;</span> <span class=\"string\">__(&#x27;post.in&#x27;)</span> <span class=\"string\">&#125;&#125;&lt;/span&gt;</span></span><br><span class=\"line\">      &#123;<span class=\"string\">%-</span> <span class=\"string\">for</span> <span class=\"string\">cat</span> <span class=\"string\">in</span> <span class=\"string\">post.categories.toArray()</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">        <span class=\"string\">&lt;span</span> <span class=\"string\">itemprop=&quot;about&quot;</span> <span class=\"string\">itemscope</span> <span class=\"string\">itemtype=&quot;http://schema.org/Thing&quot;&gt;</span></span><br><span class=\"line\">        &#123;<span class=\"comment\">####cat.name.toLowerCase()####&#125;</span></span><br><span class=\"line\">          <span class=\"string\">&lt;a</span> <span class=\"string\">href=&quot;<span class=\"template-variable\">&#123;&#123; url_for(cat.path) &#125;&#125;</span></span><span class=\"string\">&quot; itemprop=&quot;</span><span class=\"string\">url&quot;</span> <span class=\"string\">rel=&quot;index&quot;&gt;&lt;span</span> <span class=\"string\">itemprop=&quot;name&quot;&gt;<span class=\"template-variable\">&#123;&#123; cat.name.toLowerCase() &#125;&#125;</span></span><span class=\"string\">&lt;/span&gt;&lt;/a&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        &#123;<span class=\"string\">%-</span> <span class=\"string\">set</span> <span class=\"string\">cat_length</span> <span class=\"string\">=</span> <span class=\"string\">post.categories.length</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">        &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">cat_length</span> <span class=\"string\">&gt;</span> <span class=\"number\">1</span> <span class=\"string\">and</span> <span class=\"string\">loop.index</span> <span class=\"type\">!==</span> <span class=\"string\">cat_length</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">          &#123;&#123; <span class=\"string\">__(&#x27;symbol.comma&#x27;)</span> &#125;&#125;</span><br><span class=\"line\">        &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">      &#123;<span class=\"string\">%-</span> <span class=\"string\">endfor</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"comment\"># LeanCloud PageView #&#125;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">theme.leancloud_visitors.enable</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;<span class=\"template-variable\">&#123;&#123; url_for(post.path) &#125;&#125;</span></span><span class=\"string\">&quot; class=&quot;</span><span class=\"string\">post-meta-item</span> <span class=\"string\">leancloud_visitors&quot;</span> <span class=\"string\">data-flag-title=&quot;<span class=\"template-variable\">&#123;&#123; post.title &#125;&#125;</span></span><span class=\"string\">&quot; title=&quot;</span>&#123;&#123; <span class=\"string\">__(&#x27;post.views&#x27;)</span> &#125;&#125;<span class=\"string\">&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;span class=&quot;</span><span class=\"string\">post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;far</span> <span class=\"string\">fa-eye&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-text&quot;&gt;<span class=\"template-variable\">&#123;&#123; __(&#x27;post.views&#x27;) + __(&#x27;symbol.colon&#x27;) &#125;&#125;</span></span><span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;leancloud-visitors-count&quot;&gt;&lt;/span&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">theme.firestore.enable</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item&quot;</span> <span class=\"string\">title=&quot;<span class=\"template-variable\">&#123;&#123; __(&#x27;post.views&#x27;) &#125;&#125;</span></span><span class=\"string\">&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;span class=&quot;</span><span class=\"string\">post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;far</span> <span class=\"string\">fa-eye&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-text&quot;&gt;<span class=\"template-variable\">&#123;&#123; __(&#x27;post.views&#x27;) + __(&#x27;symbol.colon&#x27;) &#125;&#125;</span></span><span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;firestore-visitors-count&quot;&gt;&lt;/span&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">not</span> <span class=\"string\">is_index</span> <span class=\"string\">and</span> <span class=\"string\">theme.busuanzi_count.enable</span> <span class=\"string\">and</span> <span class=\"string\">theme.busuanzi_count.post_views</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item&quot;</span> <span class=\"string\">title=&quot;<span class=\"template-variable\">&#123;&#123; __(&#x27;post.views&#x27;) &#125;&#125;</span></span><span class=\"string\">&quot; id=&quot;</span><span class=\"string\">busuanzi_container_page_pv&quot;&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;<span class=\"template-variable\">&#123;&#123; theme.busuanzi_count.post_views_icon &#125;&#125;</span></span><span class=\"string\">&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;/span&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;span class=&quot;</span><span class=\"string\">post-meta-item-text&quot;&gt;<span class=\"template-variable\">&#123;&#123; __(&#x27;post.views&#x27;) + __(&#x27;symbol.colon&#x27;) &#125;&#125;</span></span><span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;&#123;<span class=\"bullet\">-</span> <span class=\"string\">next_inject(&#x27;postMeta&#x27;)</span> &#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">theme.symbols_count_time.separated_meta</span> <span class=\"string\">and</span> <span class=\"string\">config.symbols_count_time.symbols</span> <span class=\"string\">and</span> <span class=\"string\">config.symbols_count_time.time</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-break&quot;&gt;&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">config.symbols_count_time.symbols</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item&quot;</span> <span class=\"string\">title=&quot;<span class=\"template-variable\">&#123;&#123; __(&#x27;symbols_count_time.count&#x27;) &#125;&#125;</span></span><span class=\"string\">&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;span class=&quot;</span><span class=\"string\">post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;far</span> <span class=\"string\">fa-file-word&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-text&quot;&gt;<span class=\"template-variable\">&#123;&#123; __(&#x27;symbols_count_time.count&#x27;) + __(&#x27;symbol.colon&#x27;) &#125;&#125;</span></span><span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span&gt;<span class=\"template-variable\">&#123;&#123; symbolsCount(post) &#125;&#125;</span></span><span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">if</span> <span class=\"string\">config.symbols_count_time.time</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\">    <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item&quot;</span> <span class=\"string\">title=&quot;<span class=\"template-variable\">&#123;&#123; __(&#x27;symbols_count_time.time&#x27;) &#125;&#125;</span></span><span class=\"string\">&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">      &lt;span class=&quot;</span><span class=\"string\">post-meta-item-icon&quot;&gt;</span></span><br><span class=\"line\">        <span class=\"string\">&lt;i</span> <span class=\"string\">class=&quot;far</span> <span class=\"string\">fa-clock&quot;&gt;&lt;/i&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span</span> <span class=\"string\">class=&quot;post-meta-item-text&quot;&gt;<span class=\"template-variable\">&#123;&#123; __(&#x27;symbols_count_time.time&#x27;) &#125;&#125;</span></span> <span class=\"string\">&amp;asymp;&lt;/span&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;span&gt;<span class=\"template-variable\">&#123;&#123; symbolsTime(post, config.symbols_count_time.awl, config.symbols_count_time.wpm, __(&#x27;symbols_count_time.time_minutes&#x27;)) &#125;&#125;</span></span><span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">    <span class=\"string\">&lt;/span&gt;</span></span><br><span class=\"line\">  &#123;<span class=\"string\">%-</span> <span class=\"string\">endif</span> <span class=\"string\">%</span>&#125;</span><br><span class=\"line\"><span class=\"string\">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"hexo-更改-url-中-uri\"><a href=\"#hexo-更改-url-中-uri\" class=\"headerlink\" title=\"hexo 更改 url 中 uri\"></a>hexo 更改 url 中 uri</h1><p>更改<code>hexo</code>的<code>_config.yaml</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#permalink: :year/:month/:day/:title/  默认显示年月日加标题的，更改成只显示标题</span></span><br><span class=\"line\"><span class=\"attr\">permalink:</span> <span class=\"string\">:title/</span></span><br></pre></td></tr></table></figure>\n","categories":["hexo"],"tags":["hexo"]},{"title":"hexo主题美化","url":"/hexo/hexo-theme-custom/","content":"<h1 id=\"更改侧边栏背景颜色\"><a href=\"#更改侧边栏背景颜色\" class=\"headerlink\" title=\"更改侧边栏背景颜色\"></a>更改侧边栏背景颜色</h1><p>更改配置文件<code>themes\\next\\source\\css\\_common\\outline\\sidebar\\sidebar.styl</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">.sidebar &#123;</span><br><span class=\"line\">  background: <span class=\"variable\">$black</span>-deep; <span class=\"comment\">#背景颜色</span></span><br><span class=\"line\">  bottom: 0;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!hexo-config(<span class=\"string\">&#x27;back2top.sidebar&#x27;</span>))&#123;</span><br><span class=\"line\">    box-shadow: inset 0 2px 6px black;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  position: fixed;</span><br><span class=\"line\">  top: 0;</span><br><span class=\"line\"></span><br><span class=\"line\">  +tablet-<span class=\"function\"><span class=\"title\">mobile</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!hexo-config(<span class=\"string\">&#x27;sidebar.onmobile&#x27;</span>)) &#123;</span><br><span class=\"line\">      display: none;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"修改底部用户图标为跳动的心\"><a href=\"#修改底部用户图标为跳动的心\" class=\"headerlink\" title=\"修改底部用户图标为跳动的心\"></a>修改底部用户图标为跳动的心</h1><p>在主题的<code>_config.yml</code>中修改如下</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#网站的页脚设置部分</span></span><br><span class=\"line\"><span class=\"attr\">footer:</span></span><br><span class=\"line\">  <span class=\"comment\"># Specify the date when the site was setup. If not defined, current year will be used.</span></span><br><span class=\"line\">  <span class=\"attr\">since:</span> <span class=\"number\">2021</span> <span class=\"comment\">#网站的建站时间</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\"># Icon between year and copyright info.</span></span><br><span class=\"line\">  <span class=\"attr\">icon:</span> <span class=\"comment\">#这里的icon是页脚建站时间和网站名字之间的图标，默认是 `user`图标</span></span><br><span class=\"line\">    <span class=\"comment\"># Icon name in Font Awesome. See: https://fontawesome.com/icons</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">fa</span> <span class=\"string\">fa-heart</span>  <span class=\"comment\">#图标名称</span></span><br><span class=\"line\">    <span class=\"comment\"># If you want to animate the icon, set it to true.</span></span><br><span class=\"line\">    <span class=\"attr\">animated:</span> <span class=\"literal\">true</span> <span class=\"comment\">#是否是动画，默认</span></span><br><span class=\"line\">    <span class=\"comment\"># Change the color of icon, using Hex Code.</span></span><br><span class=\"line\">    <span class=\"attr\">color:</span> <span class=\"string\">&quot;#ff0000&quot;</span> <span class=\"comment\">#图标颜色</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h1 id=\"修改底部信息居中\"><a href=\"#修改底部信息居中\" class=\"headerlink\" title=\"修改底部信息居中\"></a>修改底部信息居中</h1><p>修改文件<code>D:\\hexoblog\\docblog\\themes\\next\\source\\css\\_schemes\\Mist\\_layout.styl</code></p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">Tags</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">--------------------------------------------------</span></span><br><span class=\"line\"><span class=\"string\">hr</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">height:</span> <span class=\"string\">2px;</span></span><br><span class=\"line\">  <span class=\"attr\">margin:</span> <span class=\"string\">20px</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">Components</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">--------------------------------------------------</span></span><br><span class=\"line\"><span class=\"string\">.btn</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">padding:</span> <span class=\"number\">0</span> <span class=\"string\">10px;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">.headband</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">display:</span> <span class=\"string\">none;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">Page</span> <span class=\"bullet\">-</span> <span class=\"string\">Container</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">--------------------------------------------------</span></span><br><span class=\"line\"><span class=\"string\">.main-inner</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">padding-bottom:</span> <span class=\"string\">80px;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">+mobile()</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">width:</span> <span class=\"string\">auto;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">.content</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">padding-top:</span> <span class=\"string\">80px;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">+mobile()</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">padding-top:</span> <span class=\"string\">60px;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">Pagination</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">--------------------------------------------------</span></span><br><span class=\"line\"><span class=\"string\">.pagination</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">margin:</span> <span class=\"string\">120px</span> <span class=\"number\">0</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\">  <span class=\"attr\">text-align:</span> <span class=\"string\">left;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">+mobile()</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">margin:</span> <span class=\"string\">80px</span> <span class=\"string\">10px</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\">    <span class=\"attr\">text-align:</span> <span class=\"string\">center;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">Footer</span></span><br><span class=\"line\"><span class=\"string\">//</span> <span class=\"string\">--------------------------------------------------</span></span><br><span class=\"line\"><span class=\"string\">.footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">background:</span> <span class=\"string\">var(--content-bg-color);</span></span><br><span class=\"line\">  <span class=\"attr\">color:</span> <span class=\"string\">var(--text-color);</span></span><br><span class=\"line\">  <span class=\"attr\">padding:</span> <span class=\"string\">10px</span> <span class=\"number\">0</span><span class=\"string\">;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">.footer-inner</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">text-align:</span> <span class=\"string\">center;</span>  <span class=\"comment\">#left改为center</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">+mobile()</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">text-align:</span> <span class=\"string\">center;</span></span><br><span class=\"line\">    <span class=\"attr\">width:</span> <span class=\"string\">auto;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"内联代码文字背景\"><a href=\"#内联代码文字背景\" class=\"headerlink\" title=\"内联代码文字背景\"></a>内联代码文字背景</h1><p>在<code>G:\\hexo-doubao\\themes\\next\\source\\css\\main.styl</code>最后面添加下面的代码</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">code</span> &#123;</span><br><span class=\"line\">    <span class=\"string\">/*</span> <span class=\"string\">Customize</span> <span class=\"string\">inline</span> <span class=\"string\">code</span> <span class=\"string\">styles</span> <span class=\"string\">here</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">background-color:</span> <span class=\"comment\">#fffff5; /* Background color */</span></span><br><span class=\"line\">    <span class=\"attr\">color:</span> <span class=\"comment\">#58C9B9; /* Text color */</span></span><br><span class=\"line\">    <span class=\"attr\">padding:</span> <span class=\"string\">5px</span> <span class=\"string\">7px;</span> <span class=\"string\">/*</span> <span class=\"string\">Padding</span> <span class=\"string\">around</span> <span class=\"string\">the</span> <span class=\"string\">code</span> <span class=\"string\">*/</span></span><br><span class=\"line\">    <span class=\"attr\">border-radius:</span> <span class=\"string\">4px;</span> <span class=\"string\">/*</span> <span class=\"string\">Border</span> <span class=\"string\">radius</span> <span class=\"string\">for</span> <span class=\"string\">rounded</span> <span class=\"string\">corners</span> <span class=\"string\">*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>字体和背景颜色取自<a href=\"https://www.webdesignrankings.com/resources/lolcolors/\">取色器</a></p>\n<h1 id=\"修改主题-css-配置\"><a href=\"#修改主题-css-配置\" class=\"headerlink\" title=\"修改主题 css 配置\"></a>修改主题 css 配置</h1><p>在<code>G:\\hexo\\themes\\next\\source\\css\\_common\\components\\post\\post-body.styl</code>文件后面追加</p>\n<p>如果想设置鼠标移动上去后变色，也可以设置</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">  <span class=\"selector-tag\">a</span><span class=\"selector-pseudo\">:not</span>(<span class=\"selector-class\">.btn</span>)&#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#1971c2</span>; //超链接显示颜色</span><br><span class=\"line\">  <span class=\"attribute\">border-bottom</span>: none;</span><br><span class=\"line\">//  &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">//\t<span class=\"attribute\">color</span>: <span class=\"number\">#00FA9A</span>;  //鼠标移动上去后超链接颜色</span><br><span class=\"line\">//\t<span class=\"attribute\">font-weight</span>: bold;</span><br><span class=\"line\">//\t<span class=\"attribute\">text-decoration</span>: underline;</span><br><span class=\"line\">//\t&#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"首页文章标题居中\"><a href=\"#首页文章标题居中\" class=\"headerlink\" title=\"首页文章标题居中\"></a>首页文章标题居中</h1><p>由于 Next 中的 Mist 主题首页文章的标题默认是左对齐的。添加配置后才可以是居中。</p>\n<p>添加配置到<code>D:\\hexo\\themes\\next\\source\\css\\_schemes\\Mist\\_menu.styl</code>中，重新启动就可以让首页文章的标题居中。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.posts-expand</span> <span class=\"selector-class\">.post-title</span>, <span class=\"selector-class\">.posts-expand</span> <span class=\"selector-class\">.post-meta</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"首页文章简介居中\"><a href=\"#首页文章简介居中\" class=\"headerlink\" title=\"首页文章简介居中\"></a>首页文章简介居中</h1><p>更改<code>D:\\hexo\\themes\\next\\source\\css\\_schemes\\Mist\\_posts-expand.styl</code>中的配置，重新启动就可以让章简介的居中。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"code\"><pre><span class=\"line\">// Post Expand</span><br><span class=\"line\">// --------------------------------------------------</span><br><span class=\"line\"><span class=\"selector-class\">.posts-expand</span> &#123;</span><br><span class=\"line\">  &amp;<span class=\"selector-class\">.index</span> &#123;</span><br><span class=\"line\">    <span class=\"selector-class\">.post-header</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">text-align</span>: $scheme-text-align;</span><br><span class=\"line\"></span><br><span class=\"line\">      +mobile() &#123;</span><br><span class=\"line\">        <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.post-meta-container</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">margin-top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.post-meta</span> &#123;</span><br><span class=\"line\">//由<span class=\"attribute\">flex</span>-start更改为center</span><br><span class=\"line\">      <span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\"></span><br><span class=\"line\">      +mobile() &#123;</span><br><span class=\"line\">        <span class=\"attribute\">justify-content</span>: center;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-eof</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: none;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-block</span><span class=\"selector-pseudo\">:not</span>(<span class=\"selector-pseudo\">:first-of-type</span>) &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">120px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-header</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-tags</span> &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">background</span>: <span class=\"built_in\">var</span>(--content-bg-color);</span><br><span class=\"line\">      <span class=\"attribute\">border-bottom</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1px</span> <span class=\"number\">5px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">background</span>: <span class=\"built_in\">var</span>(--menu-item-bg-color);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-nav</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.post-button</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.btn</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-bottom</span>: <span class=\"number\">2px</span> solid <span class=\"built_in\">var</span>(--btn-default-border-color);</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">transition-property</span>: border;</span><br><span class=\"line\"></span><br><span class=\"line\">    &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">border-bottom-color</span>: <span class=\"built_in\">var</span>(--btn-default-hover-border-color);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"修改浏览器标签页-title\"><a href=\"#修改浏览器标签页-title\" class=\"headerlink\" title=\"修改浏览器标签页 title\"></a>修改浏览器标签页 title</h1><p>更改<code>themes\\next\\layout\\page.swig</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;% block title %&#125;</span><br><span class=\"line\">  &#123;%- <span class=\"built_in\">set</span> page_title_suffix = <span class=\"string\">&#x27; | &#x27;</span> + title %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#123;%- <span class=\"keyword\">if</span> page.type === <span class=\"string\">&#x27;categories&#x27;</span> and not page.title %&#125;</span><br><span class=\"line\">    &#123;&#123;- __(<span class=\"string\">&#x27;title.category&#x27;</span>) + page_title_suffix &#125;&#125;</span><br><span class=\"line\">  &#123;%- <span class=\"keyword\">elif</span> page.type === <span class=\"string\">&#x27;tags&#x27;</span> and not page.title %&#125;</span><br><span class=\"line\">    &#123;&#123;- __(<span class=\"string\">&#x27;title.tag&#x27;</span>) + page_title_suffix &#125;&#125;</span><br><span class=\"line\">  &#123;%- <span class=\"keyword\">elif</span> page.type === <span class=\"string\">&#x27;schedule&#x27;</span> and not page.title %&#125;</span><br><span class=\"line\">    &#123;&#123;- __(<span class=\"string\">&#x27;title.schedule&#x27;</span>) + page_title_suffix &#125;&#125;</span><br><span class=\"line\">  &#123;%- <span class=\"keyword\">else</span> %&#125;</span><br><span class=\"line\">    &#123;&#123;- page.name + page_title_suffix &#125;&#125;#有title更改为name</span><br><span class=\"line\">  &#123;%- endif %&#125;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>在对应菜单的index.md文件中修改title为name</code></p>\n","categories":["hexo"],"tags":["hexo"]},{"title":"hexo搭建和安装相关组件","url":"/hexo/hexo-use-next-setup-blog/","content":"<h2 id=\"初始化博客目录\"><a href=\"#初始化博客目录\" class=\"headerlink\" title=\"初始化博客目录\"></a>初始化博客目录</h2><p><code>例如：D:\\hexoblog\\docblog</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\hexoblog\\docblog]$ hexo init</span><br><span class=\"line\">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git</span><br><span class=\"line\">INFO  Install dependencies</span><br><span class=\"line\">npm WARN config global `--global`, `--<span class=\"built_in\">local</span>` are deprecated. Use `--location=global` instead.</span><br><span class=\"line\">INFO  Start blogging with Hexo</span><br></pre></td></tr></table></figure>\n\n<p><code>目录信息</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── _config.yml <span class=\"comment\">#Hexo的配置文件</span></span><br><span class=\"line\">├── db.json <span class=\"comment\">#Hexo自动生成的文件</span></span><br><span class=\"line\">├── package.json <span class=\"comment\">#插件配置文件，下同</span></span><br><span class=\"line\">├── package-lock.json</span><br><span class=\"line\">├── node_modules <span class=\"comment\">#生成网站需要用到的Node.js模块</span></span><br><span class=\"line\">├── scaffolds <span class=\"comment\">#存放模板的文件夹</span></span><br><span class=\"line\">├── <span class=\"built_in\">source</span> <span class=\"comment\">#博客Markdown源文件夹</span></span><br><span class=\"line\">├── public <span class=\"comment\">#存放生成的静态HTML文件</span></span><br><span class=\"line\">└── themes <span class=\"comment\">#主题文件夹</span></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p><code>环境的各个信息</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\hexoblog\\docblog]$ hexo -v</span><br><span class=\"line\">INFO  Validating config</span><br><span class=\"line\">hexo: 6.2.0</span><br><span class=\"line\">hexo-cli: 4.3.0</span><br><span class=\"line\">os: win32 10.0.22000</span><br><span class=\"line\">node: 16.15.1</span><br><span class=\"line\">v8: 9.4.146.24-node.21</span><br><span class=\"line\">uv: 1.43.0</span><br><span class=\"line\">zlib: 1.2.11</span><br><span class=\"line\">brotli: 1.0.9</span><br><span class=\"line\">ares: 1.18.1</span><br><span class=\"line\">modules: 93</span><br><span class=\"line\">nghttp2: 1.47.0</span><br><span class=\"line\">napi: 8</span><br><span class=\"line\">llhttp: 6.0.4</span><br><span class=\"line\">openssl: 1.1.1o+quic</span><br><span class=\"line\">cldr: 40.0</span><br><span class=\"line\">icu: 70.1</span><br><span class=\"line\">tz: 2021a3</span><br><span class=\"line\">unicode: 14.0</span><br><span class=\"line\">ngtcp2: 0.1.0-DEV</span><br><span class=\"line\">nghttp3: 0.1.0-DEV</span><br><span class=\"line\"></span><br><span class=\"line\">[D:\\hexoblog\\docblog]$ npm -v</span><br><span class=\"line\">npm WARN config global `--global`, `--<span class=\"built_in\">local</span>` are deprecated. Use `--location=global` instead.</span><br><span class=\"line\">8.17.0</span><br><span class=\"line\"></span><br><span class=\"line\">[D:\\hexoblog\\docblog]$ node -v</span><br><span class=\"line\">v16.15.1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装所需插件\"><a href=\"#安装所需插件\" class=\"headerlink\" title=\"安装所需插件\"></a>安装所需插件</h2><h3 id=\"安装-Next-主题\"><a href=\"#安装-Next-主题\" class=\"headerlink\" title=\"安装 Next 主题\"></a>安装 Next 主题</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\hexoblog\\docblog]$ git <span class=\"built_in\">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br><span class=\"line\">Cloning into <span class=\"string\">&#x27;themes/next&#x27;</span>...</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装字数统计和阅读时长\"><a href=\"#安装字数统计和阅读时长\" class=\"headerlink\" title=\"安装字数统计和阅读时长\"></a>安装字数统计和阅读时长</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\hexoblog\\docblog]$ npm install hexo-symbols-count-time --save</span><br><span class=\"line\">npm WARN config global `--global`, `--<span class=\"built_in\">local</span>` are deprecated. Use `--location=global` instead.</span><br><span class=\"line\">npm WARN deprecated highlight.js@9.18.5: Support has ended <span class=\"keyword\">for</span> 9.x series. Upgrade to @latest</span><br><span class=\"line\"></span><br><span class=\"line\">added 8 packages, and audited 249 packages <span class=\"keyword\">in</span> 25s</span><br><span class=\"line\"></span><br><span class=\"line\">20 packages are looking <span class=\"keyword\">for</span> funding</span><br><span class=\"line\">  run `npm fund` <span class=\"keyword\">for</span> details</span><br><span class=\"line\"></span><br><span class=\"line\">3 moderate severity vulnerabilities</span><br><span class=\"line\"></span><br><span class=\"line\">To address all issues, run:</span><br><span class=\"line\">  npm audit fix</span><br><span class=\"line\"></span><br><span class=\"line\">Run `npm audit` <span class=\"keyword\">for</span> details.</span><br><span class=\"line\"></span><br><span class=\"line\">[D:\\hexoblog\\docblog]$ npm install eslint --save</span><br><span class=\"line\">npm WARN config global `--global`, `--<span class=\"built_in\">local</span>` are deprecated. Use `--location=global` instead.</span><br><span class=\"line\"></span><br><span class=\"line\">added 71 packages, and audited 320 packages <span class=\"keyword\">in</span> 1m</span><br><span class=\"line\"></span><br><span class=\"line\">40 packages are looking <span class=\"keyword\">for</span> funding</span><br><span class=\"line\">  run `npm fund` <span class=\"keyword\">for</span> details</span><br><span class=\"line\"></span><br><span class=\"line\">3 moderate severity vulnerabilities</span><br><span class=\"line\"></span><br><span class=\"line\">To address all issues (including breaking changes), run:</span><br><span class=\"line\">  npm audit fix --force</span><br><span class=\"line\"></span><br><span class=\"line\">Run `npm audit` <span class=\"keyword\">for</span> details.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装-git-远程部署\"><a href=\"#安装-git-远程部署\" class=\"headerlink\" title=\"安装 git 远程部署\"></a>安装 git 远程部署</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\hexoblog\\docblog]$  npm install hexo-deployer-git --save</span><br><span class=\"line\">npm WARN config global `--global`, `--<span class=\"built_in\">local</span>` are deprecated. Use `--location=global` instead.</span><br><span class=\"line\"></span><br><span class=\"line\">added 1 package, and audited 321 packages <span class=\"keyword\">in</span> 3s</span><br><span class=\"line\"></span><br><span class=\"line\">40 packages are looking <span class=\"keyword\">for</span> funding</span><br><span class=\"line\">  run `npm fund` <span class=\"keyword\">for</span> details</span><br><span class=\"line\"></span><br><span class=\"line\">3 moderate severity vulnerabilities</span><br><span class=\"line\"></span><br><span class=\"line\">To address all issues (including breaking changes), run:</span><br><span class=\"line\">  npm audit fix --force</span><br><span class=\"line\"></span><br><span class=\"line\">Run `npm audit` <span class=\"keyword\">for</span> details.</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加搜索\"><a href=\"#添加搜索\" class=\"headerlink\" title=\"添加搜索\"></a>添加搜索</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\hexoblog\\docblog]$ npm install hexo-generator-searchdb --save</span><br><span class=\"line\">npm WARN config global `--global`, `--<span class=\"built_in\">local</span>` are deprecated. Use `--location=global` instead.</span><br><span class=\"line\"></span><br><span class=\"line\">added 1 package, and audited 322 packages <span class=\"keyword\">in</span> 3s</span><br><span class=\"line\"></span><br><span class=\"line\">40 packages are looking <span class=\"keyword\">for</span> funding</span><br><span class=\"line\">  run `npm fund` <span class=\"keyword\">for</span> details</span><br><span class=\"line\"></span><br><span class=\"line\">3 moderate severity vulnerabilities</span><br><span class=\"line\"></span><br><span class=\"line\">To address all issues (including breaking changes), run:</span><br><span class=\"line\">  npm audit fix --force</span><br><span class=\"line\"></span><br><span class=\"line\">Run `npm audit` <span class=\"keyword\">for</span> details.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"添加图片\"><a href=\"#添加图片\" class=\"headerlink\" title=\"添加图片\"></a>添加图片</h3><figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">[D:\\hexoblog\\docblog]$ npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br><span class=\"line\"></span><br><span class=\"line\">added 21 packages, and audited 338 packages <span class=\"keyword\">in</span> 15s</span><br><span class=\"line\"></span><br><span class=\"line\">50 packages are looking <span class=\"keyword\">for</span> funding</span><br><span class=\"line\">  run `npm fund` <span class=\"keyword\">for</span> details</span><br><span class=\"line\"></span><br><span class=\"line\">9 vulnerabilities (3 moderate, 5 high, 1 critical)</span><br><span class=\"line\"></span><br><span class=\"line\">To address all issues possible (including breaking changes), run:</span><br><span class=\"line\">  npm audit fix --force</span><br><span class=\"line\"></span><br><span class=\"line\">Some issues need review, and may require choosing</span><br><span class=\"line\">a different dependency.</span><br><span class=\"line\"></span><br><span class=\"line\">Run `npm audit` <span class=\"keyword\">for</span> details.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更改配置文件\"><a href=\"#更改配置文件\" class=\"headerlink\" title=\"更改配置文件\"></a>更改配置文件</h2><p><code>更改_config.yml中的主题配置</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Extensions</span></span><br><span class=\"line\"><span class=\"comment\">## Plugins: https://hexo.io/plugins/</span></span><br><span class=\"line\"><span class=\"comment\">## Themes: https://hexo.io/themes/</span></span><br><span class=\"line\">theme: next</span><br></pre></td></tr></table></figure>\n\n<p><code>更改_config.yml中的Site配置</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Site</span></span><br><span class=\"line\">title: dooubb</span><br><span class=\"line\">subtitle: <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">description: <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">keywords:</span><br><span class=\"line\">author: dooubb</span><br><span class=\"line\">language: zh-CN</span><br><span class=\"line\">timezone: <span class=\"string\">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>添加git部署配置</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Deployment</span></span><br><span class=\"line\"><span class=\"comment\">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  ignore_hidden: <span class=\"literal\">false</span> <span class=\"comment\"># 添加这个属性值为false 此配置为了git workflows工作</span></span><br><span class=\"line\">  repo:</span><br><span class=\"line\">    <span class=\"comment\">#gitee: https://gitee.com/dooubb/doc.git,master</span></span><br><span class=\"line\">    github: https://github.com/dooubb/doco.git,master</span><br></pre></td></tr></table></figure>\n\n<p><code>在_config.yml添加字数统计和阅读时长配置</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">symbols_count_time:</span><br><span class=\"line\">  symbols: <span class=\"literal\">true</span></span><br><span class=\"line\">  time: <span class=\"literal\">true</span></span><br><span class=\"line\">  total_symbols: <span class=\"literal\">false</span></span><br><span class=\"line\">  total_time: <span class=\"literal\">false</span></span><br><span class=\"line\">  exclude_codeblock: <span class=\"literal\">false</span></span><br><span class=\"line\">  awl: 4</span><br><span class=\"line\">  wpm: 275</span><br><span class=\"line\">  suffix: <span class=\"string\">&quot;mins.&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更改主题配置文件\"><a href=\"#更改主题配置文件\" class=\"headerlink\" title=\"更改主题配置文件\"></a>更改主题配置文件</h2><p><code>更改NexT主题下_config.yml配置文件</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"># Scheme Settings 主题显示样式</span></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"># Schemes</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Muse</span></span><br><span class=\"line\">scheme: Mist</span><br><span class=\"line\"><span class=\"comment\">#scheme: Pisces</span></span><br><span class=\"line\"><span class=\"comment\">#scheme: Gemini</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"># Post wordcount display settings</span></span><br><span class=\"line\"><span class=\"comment\"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\">symbols_count_time:</span><br><span class=\"line\">  separated_meta: <span class=\"literal\">false</span>     <span class=\"comment\"># 是否另起一行（true的话不和发表时间等同一行）</span></span><br><span class=\"line\">  item_text_post: <span class=\"literal\">false</span>     <span class=\"comment\"># 首页文章统计数量前是否显示文字描述（本文字数、阅读时长）</span></span><br><span class=\"line\"> <span class=\"comment\"># item_text_total: false   # 页面底部统计数量前是否显示文字描述（站点总字数、站点阅读时长）</span></span><br><span class=\"line\">  awl: 4                   <span class=\"comment\"># Average Word Length</span></span><br><span class=\"line\">  wpm: 275                 <span class=\"comment\"># Words Per Minute（每分钟阅读词数）</span></span><br><span class=\"line\">  suffix: mins.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"># Site Information Settings 网页小图标</span></span><br><span class=\"line\"><span class=\"comment\"># See: https://theme-next.org/docs/getting-started/</span></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\">favicon:</span><br><span class=\"line\">  small: /images/qpp.png</span><br><span class=\"line\">  medium: /images/qpp.png</span><br><span class=\"line\">  apple_touch_icon: /images/apple-touch-icon-next.png</span><br><span class=\"line\">  safari_pinned_tab: /images/logo.svg</span><br><span class=\"line\">  <span class=\"comment\">#android_manifest: /images/manifest.json</span></span><br><span class=\"line\">  <span class=\"comment\">#ms_browserconfig: /images/browserconfig.xml</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"># Sidebar Settings 文章的目录显示位置</span></span><br><span class=\"line\"><span class=\"comment\"># See: https://theme-next.org/docs/theme-settings/sidebar</span></span><br><span class=\"line\"><span class=\"comment\"># ---------------------------------------------------------------</span></span><br><span class=\"line\">sidebar:</span><br><span class=\"line\">  <span class=\"comment\"># Sidebar Position.</span></span><br><span class=\"line\">  <span class=\"comment\">#position: left</span></span><br><span class=\"line\">  position: right</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Social Links</span></span><br><span class=\"line\"><span class=\"comment\"># Usage: `Key: permalink || icon`</span></span><br><span class=\"line\"><span class=\"comment\"># Key is the link label showing to end users.</span></span><br><span class=\"line\"><span class=\"comment\"># Value before `||` delimiter is the target permalink, value after `||` delimiter is the name of Font Awesome icon.</span></span><br><span class=\"line\">social:</span><br><span class=\"line\">  GitHub: https://github.com/dooubb  || fab fa-github</span><br><span class=\"line\">  E-Mail: fanq1213@163.com || fa fa-envelope</span><br><span class=\"line\"></span><br><span class=\"line\">social_icons:</span><br><span class=\"line\">  <span class=\"built_in\">enable</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  icons_only: <span class=\"literal\">false</span></span><br><span class=\"line\">  transition: <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Local Search 本地搜索</span></span><br><span class=\"line\"><span class=\"comment\"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class=\"line\">local_search:</span><br><span class=\"line\">  <span class=\"built_in\">enable</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># If auto, trigger search by changing input.</span></span><br><span class=\"line\">  <span class=\"comment\"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class=\"line\">  trigger: auto</span><br><span class=\"line\">  <span class=\"comment\"># Show top n results per article, show all results by setting to -1</span></span><br><span class=\"line\">  top_n_per_article: 1</span><br><span class=\"line\">  <span class=\"comment\"># Unescape html strings to the readable one.</span></span><br><span class=\"line\">  unescape: <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"comment\"># Preload the search data when the page loads.</span></span><br><span class=\"line\">  preload: <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#文章创建时间和更新时间</span></span><br><span class=\"line\"><span class=\"comment\"># Post meta display settings</span></span><br><span class=\"line\">post_meta:</span><br><span class=\"line\">  item_text: <span class=\"literal\">true</span></span><br><span class=\"line\">  created_at: <span class=\"literal\">true</span></span><br><span class=\"line\">  updated_at:</span><br><span class=\"line\">    <span class=\"built_in\">enable</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    another_day: <span class=\"literal\">false</span>  <span class=\"comment\">#如果是true表示同一天只显示创建时间</span></span><br><span class=\"line\">  categories: <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"修改首页文章标题和统计信息居中\"><a href=\"#修改首页文章标题和统计信息居中\" class=\"headerlink\" title=\"修改首页文章标题和统计信息居中\"></a>修改首页文章标题和统计信息居中</h2><p><code>替换themes/next/source/css/_schemes/Mist/_posts-expanded.styl文件内容</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">// Post Expand</span><br><span class=\"line\">// --------------------------------------------------</span><br><span class=\"line\">.posts-expand &#123;</span><br><span class=\"line\">  &amp;.index &#123;</span><br><span class=\"line\">    .post-title&#123;</span><br><span class=\"line\">      text-align: center; <span class=\"comment\">#文章标题</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    .post-meta &#123;</span><br><span class=\"line\">      text-align: center; <span class=\"comment\">#统计信息</span></span><br><span class=\"line\"></span><br><span class=\"line\">      +<span class=\"function\"><span class=\"title\">mobile</span></span>() &#123;</span><br><span class=\"line\">        text-align: center;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .post-meta &#123;</span><br><span class=\"line\">      margin: 5px 0 20px 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  .post-eof &#123;</span><br><span class=\"line\">    display: none;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  .post-block:not(:first-child) &#123;</span><br><span class=\"line\">    margin-top: 120px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  .post-title, .post-meta &#123;</span><br><span class=\"line\">    text-align: center;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  .post-body img &#123;</span><br><span class=\"line\">    margin-left: 0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  .post-tags &#123;</span><br><span class=\"line\">    text-align: left;</span><br><span class=\"line\"></span><br><span class=\"line\">    a &#123;</span><br><span class=\"line\">      background: <span class=\"variable\">$whitesmoke</span>;</span><br><span class=\"line\">      border-bottom: none;</span><br><span class=\"line\">      padding: 1px 5px;</span><br><span class=\"line\"></span><br><span class=\"line\">      &amp;:hover &#123;</span><br><span class=\"line\">        background: <span class=\"variable\">$grey</span>-light;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  .post-nav &#123;</span><br><span class=\"line\">    margin-top: 40px;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.post-button &#123;</span><br><span class=\"line\">  margin-top: 20px;</span><br><span class=\"line\">  text-align: left;</span><br><span class=\"line\"></span><br><span class=\"line\">  .btn &#123;</span><br><span class=\"line\">    // color: <span class=\"variable\">$grey</span>-dim;</span><br><span class=\"line\">    background: none;</span><br><span class=\"line\">    border: 0;</span><br><span class=\"line\">    border-bottom: 2px solid var(--btn-default-border-color);</span><br><span class=\"line\">    padding: 0;</span><br><span class=\"line\">    transition-property: border;</span><br><span class=\"line\"></span><br><span class=\"line\">    &amp;:hover &#123;</span><br><span class=\"line\">      border-bottom-color: var(--btn-default-hover-border-color);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"添加网站运行时长和备案号\"><a href=\"#添加网站运行时长和备案号\" class=\"headerlink\" title=\"添加网站运行时长和备案号\"></a>添加网站运行时长和备案号</h2><p><code>全部替换themes\\next\\layout\\_partials\\footer.swig文件</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;%- <span class=\"keyword\">if</span> theme.footer.beian.enable %&#125;</span><br><span class=\"line\">  &lt;div class=<span class=\"string\">&quot;beian&quot;</span>&gt;</span><br><span class=\"line\">    &#123;&#123;- next_url(<span class=\"string\">&#x27;https://beian.miit.gov.cn&#x27;</span>, theme.footer.beian.icp + <span class=\"string\">&#x27; &#x27;</span>) &#125;&#125;</span><br><span class=\"line\">    &#123;%- <span class=\"keyword\">if</span> theme.footer.beian.gongan_icon_url %&#125;</span><br><span class=\"line\">      &lt;img src=<span class=\"string\">&quot;&#123;&#123; url_for(theme.footer.beian.gongan_icon_url) &#125;&#125;&quot;</span> style=<span class=\"string\">&quot;display: inline-block;&quot;</span>&gt;</span><br><span class=\"line\">    &#123;%- endif %&#125;</span><br><span class=\"line\">    &#123;%- <span class=\"keyword\">if</span> theme.footer.beian.gongan_id and theme.footer.beian.gongan_num %&#125;</span><br><span class=\"line\">      &#123;&#123;- next_url(<span class=\"string\">&#x27;http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=&#x27;</span> + theme.footer.beian.gongan_id, theme.footer.beian.gongan_num + <span class=\"string\">&#x27; &#x27;</span>) &#125;&#125;</span><br><span class=\"line\">    &#123;%- endif %&#125;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&#123;%- endif %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div class=<span class=\"string\">&quot;copyright&quot;</span>&gt;</span><br><span class=\"line\">  &#123;%- <span class=\"built_in\">set</span> copyright_year = <span class=\"built_in\">date</span>(null, <span class=\"string\">&#x27;YYYY&#x27;</span>) %&#125;</span><br><span class=\"line\">  &amp;copy; &#123;% <span class=\"keyword\">if</span> theme.footer.since and theme.footer.since != copyright_year %&#125;&#123;&#123; theme.footer.since &#125;&#125; – &#123;% endif %&#125;</span><br><span class=\"line\">  &lt;span itemprop=<span class=\"string\">&quot;copyrightYear&quot;</span>&gt;&#123;&#123; copyright_year &#125;&#125;&lt;/span&gt;</span><br><span class=\"line\">  &lt;span class=<span class=\"string\">&quot;with-love&quot;</span>&gt;</span><br><span class=\"line\">    &lt;i class=<span class=\"string\">&quot;&#123;&#123; theme.footer.icon.name &#125;&#125;&quot;</span>&gt;&lt;/i&gt;</span><br><span class=\"line\">  &lt;/span&gt;</span><br><span class=\"line\">  &lt;span class=<span class=\"string\">&quot;author&quot;</span> itemprop=<span class=\"string\">&quot;copyrightHolder&quot;</span>&gt;&#123;&#123; theme.footer.copyright or author &#125;&#125; &amp;&amp; &lt;span <span class=\"built_in\">id</span>=<span class=\"string\">&quot;sitetime&quot;</span>&gt;&lt;/span&gt;</span><br><span class=\"line\">  &lt;script language=javascript&gt;</span><br><span class=\"line\">\t<span class=\"keyword\">function</span> <span class=\"function\"><span class=\"title\">siteTime</span></span>()&#123;</span><br><span class=\"line\">\t\twindow.setTimeout(<span class=\"string\">&quot;siteTime()&quot;</span>, 1000);</span><br><span class=\"line\">\t\tvar seconds = 1000;</span><br><span class=\"line\">\t\tvar minutes = seconds * 60;</span><br><span class=\"line\">\t\tvar hours = minutes * 60;</span><br><span class=\"line\">\t\tvar days = hours * 24;</span><br><span class=\"line\">\t\tvar years = days * 365;</span><br><span class=\"line\">\t\tvar today = new Date();</span><br><span class=\"line\">\t\tvar todayYear = today.getFullYear();</span><br><span class=\"line\">\t\tvar todayMonth = today.getMonth()+1;</span><br><span class=\"line\">\t\tvar todayDate = today.getDate();</span><br><span class=\"line\">\t\tvar todayHour = today.getHours();</span><br><span class=\"line\">\t\tvar todayMinute = today.getMinutes();</span><br><span class=\"line\">\t\tvar todaySecond = today.getSeconds();</span><br><span class=\"line\">\t\t/* Date.UTC() -- 返回<span class=\"built_in\">date</span>对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)</span><br><span class=\"line\">\t\tyear - 作为<span class=\"built_in\">date</span>对象的年份，为4位年份值</span><br><span class=\"line\">\t\tmonth - 0-11之间的整数，做为<span class=\"built_in\">date</span>对象的月份</span><br><span class=\"line\">\t\tday - 1-31之间的整数，做为<span class=\"built_in\">date</span>对象的天数</span><br><span class=\"line\">\t\thours - 0(午夜24点)-23之间的整数，做为<span class=\"built_in\">date</span>对象的小时数</span><br><span class=\"line\">\t\tminutes - 0-59之间的整数，做为<span class=\"built_in\">date</span>对象的分钟数</span><br><span class=\"line\">\t\tseconds - 0-59之间的整数，做为<span class=\"built_in\">date</span>对象的秒数</span><br><span class=\"line\">\t\tmicroseconds - 0-999之间的整数，做为<span class=\"built_in\">date</span>对象的毫秒数 */</span><br><span class=\"line\">\t\tvar t1 = Date.UTC(2018,02,13,15,00,00); //北京时间2018-2-13 00:00:00</span><br><span class=\"line\">\t\tvar t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);</span><br><span class=\"line\">\t\tvar diff = t2-t1;</span><br><span class=\"line\">\t\tvar diffYears = Math.floor(diff/years);</span><br><span class=\"line\">\t\tvar diffDays = Math.floor((diff/days)-diffYears*<span class=\"number\">365</span>);</span><br><span class=\"line\">\t\tvar diffHours = Math.floor((diff-(diffYears*<span class=\"number\">365</span>+diffDays)*days)/hours);</span><br><span class=\"line\">\t\tvar diffMinutes = Math.floor((diff-(diffYears*<span class=\"number\">365</span>+diffDays)*days-diffHours*hours)/minutes);</span><br><span class=\"line\">\t\tvar diffSeconds = Math.floor((diff-(diffYears*<span class=\"number\">365</span>+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);</span><br><span class=\"line\">\t\tdocument.getElementById(&quot;sitetime&quot;).innerHTML=&quot; 已运行&quot;+/*diffYears+&quot; 年 &quot;+*/diffDays+&quot; 天 &quot;+diffHours+&quot; 小时 &quot;+diffMinutes+&quot; 分钟 &quot;+diffSeconds+&quot; 秒&quot;;</span><br><span class=\"line\">\t&#125;/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/</span><br><span class=\"line\">\tsiteTime();</span><br><span class=\"line\">&lt;/script&gt;&lt;/span&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;%- if theme.footer.powered %&#125;</span><br><span class=\"line\">  &lt;div class=&quot;powered-by&quot;&gt;</span><br><span class=\"line\">    &#123;%- set next_site = &#x27;https://theme-next.org&#x27; %&#125;</span><br><span class=\"line\">    &#123;%- if theme.scheme !== &#x27;Gemini&#x27; %&#125;</span><br><span class=\"line\">      &#123;%- set next_site = &#x27;https://&#x27; + theme.scheme | lower + &#x27;.theme-next.org&#x27; %&#125;</span><br><span class=\"line\">    &#123;%- endif %&#125;</span><br><span class=\"line\">    &#123;&#123;- __(&#x27;footer.powered&#x27;, next_url(&#x27;https://hexo.io&#x27;, &#x27;Hexo&#x27;, &#123;class: &#x27;theme-link&#x27;&#125;) + &#x27; &amp; &#x27; + next_url(next_site, &#x27;NexT.&#x27; + theme.scheme, &#123;class: &#x27;theme-link&#x27;&#125;)) &#125;&#125;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">&quot;https://beian.miit.gov.cn/&quot;</span>&gt;京ICP备2022022850号-1&lt;/a&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&#123;%- endif %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;%- <span class=\"keyword\">if</span> theme.add_this_id %&#125;</span><br><span class=\"line\">  &lt;div class=<span class=\"string\">&quot;addthis_inline_share_toolbox&quot;</span>&gt;</span><br><span class=\"line\">    &lt;script src=<span class=\"string\">&quot;//s7.addthis.com/js/300/addthis_widget.js#pubid=&#123;&#123; theme.add_this_id &#125;&#125;&quot;</span> async=<span class=\"string\">&quot;async&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&#123;%- endif %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;&#123;- next_inject(<span class=\"string\">&#x27;footer&#x27;</span>) &#125;&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","categories":["hexo"],"tags":["hexo"]},{"title":"next启用fancybox","url":"/hexo/next-enable-fancybox/","content":"<h1 id=\"开启-fancybox\"><a href=\"#开启-fancybox\" class=\"headerlink\" title=\"开启 fancybox\"></a>开启 fancybox</h1><p>在 <code>theme/next/</code> 文件夹下找到 Next 7.0+ 主题的 <code>_config.yml</code> 配置文件</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># FancyBox is a tool that offers a nice and elegant way to add zooming functionality for images.</span></span><br><span class=\"line\"><span class=\"comment\"># For more information: https://fancyapps.com/fancybox</span></span><br><span class=\"line\"><span class=\"attr\">fancybox:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>启用后<code>fancybox</code>，<code>hexo</code>文章中的图片可以点击放大查看，文章中的显示如下图</p>\n<p><img src=\"/hexo/next-enable-fancybox/image-20240708214608291.png\" alt=\"image-20240708214608291\"></p>\n<p>但是文章中的图片下面会有 md 文件中引用图片的名字(默认是[]中的名字)</p>\n<span id=\"more\"></span>\n\n<h1 id=\"fancybox-隐藏图片标题\"><a href=\"#fancybox-隐藏图片标题\" class=\"headerlink\" title=\"fancybox 隐藏图片标题\"></a>fancybox 隐藏图片标题</h1><p>更改<code>D:\\hexo\\themes\\next\\source\\js\\utils.js</code>中的代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//原值</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> imageTitle = $image.<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;title&#x27;</span>) || $image.<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;alt&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//更改后的</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> imageTitle =  $image.<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;alt&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<p>更改后文章中的显示</p>\n<p><img src=\"/hexo/next-enable-fancybox/image-20240708214927642.png\" alt=\"image-20240708214927642\"></p>\n","categories":["hexo"],"tags":["hexo"]}]